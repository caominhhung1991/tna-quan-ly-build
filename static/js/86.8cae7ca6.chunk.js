(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[86],{1115:function(n,e,a){"use strict";a.r(e);var t=a(3),c=a.n(t),i=a(7),r=a(9),u=a(0),d=a.n(u),o=a(48),l=a(66),b=a(408),s=a(332),h=a(201),j=a(158),O=a(271),g=a(506),p=a(414),f=a(195),v=a(270),m=a(436),C=a(419),N=a(75),L=a(413),y=a(415),I=a(21);var S=a(15),k=a(17),x=function(n){var e=Object(o.b)(),a=Object(o.c)((function(n){return n.account})).isDev,t=Object(o.c)((function(n){return n.danhSachGiaNL})).isCapNhatGiaNL;return Object(k.b)(k.a,{children:Object(k.b)(L.a,{header:Object(k.b)("div",{className:"font-weight-bold",children:Object(k.b)("span",{children:"Th\xf4ng Tin Trang"})}),body:Object(k.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(k.b)(l.a,{type:t?"primary":"dashed",onClick:function(){return e(Object(m.i)(!t))},children:"C\u1eadp nh\u1eadt gi\xe1"}),a&&Object(k.b)("div",{className:"mt-1",children:Object(k.b)("button",{onClick:function(){Object(S.k)(),e(function(){var n=Object(r.a)(c.a.mark((function n(e,a){var t,i,r,u;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=a(),i=t.danhSachGiaNL.giaNguyenLieus,r=new f.a,u=[].concat(Object(I.a)(r.pathDatas),["xuongDauGiay"]),Object.values(i).forEach((function(n,e){var a=n.id,t=n.nhaCungCapId,c=n.giaNguyenLieu;(void 0===c?0:c)!==((null===n||void 0===n?void 0:n[t])||0)&&([].concat(Object(I.a)(u),[a]),console.log(n))}));case 5:case"end":return n.stop()}}),n)})));return function(e,a){return n.apply(this,arguments)}}())},children:"C\u1eadp nh\u1eadt l\u1ea1i gi\xe1 NL \u0111\xe3 g\xe1n NCC"})}),a&&Object(k.b)("div",{className:"mt-1",children:Object(k.b)("button",{onClick:function(){Object(S.k)(),e(Object(m.g)())},children:"C\u1eadp nh\u1eadt l\u1ea1i NCC NL b\u1ecb sai"})})]}),footer:Object(k.b)("div",{children:Object(k.b)(l.a,{icon:Object(k.b)(N.a,{}),onClick:function(){e(Object(y.b)({tagPageId:j.d.danhSachGiaNLModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})})})},w=a(544),D=a(803),G=a(71),E=a(276),P=a(33),T=a(35),B=a(202),M=a(6),R=a(787),z=a(893),A=a(556),F=a(416);var J=function(n){var e,a,t,c,i=n.modalId,r=Object(o.c)((function(n){return n.danhSachGiaNL})),u=r.tabsData,d=r.isCapNhatGiaNL,l=Object(o.c)((function(n){var e;return null===(e=n.tagsPage)||void 0===e?void 0:e[i]})),b=Object(o.c)((function(n){return n.account})).accountData,s=(null===b||void 0===b||null===(e=b.paths)||void 0===e||null===(a=e.danhSachGiaNL)||void 0===a?void 0:a.edit)&&d,h=null===b||void 0===b||null===(t=b.paths)||void 0===t||null===(c=t.danhSachNL)||void 0===c?void 0:c.edit,j=Object(o.c)((function(n){return n.diaDiem})).diaDiemId,O=Object(o.c)((function(n){return n.nhaCungCap}));return{tabsData:u,tagPage:l,isEdit:s,isEditNguyenLieu:h,diaDiemId:j,nhaCungCaps:O.nhaCungCaps,nhaCungCapId:O.nhaCungCapId,nguyenLieus:Object(o.c)((function(n){return n.nguyenLieu})).nguyenLieus}};var V=function(n){var e=n.modalId,a=Object(o.b)(),t=A.a.useForm(),i=Object(P.a)(t,1)[0],u=J({modalId:e}),l=u.tabsData,b=u.tagPage,s=u.isEdit,O=u.isEditNguyenLieu,p=u.diaDiemId,f=u.nhaCungCaps,v=u.nhaCungCapId,C=u.nguyenLieus;function N(n,e){return S.apply(this,arguments)}function S(){return(S=Object(r.a)(c.a.mark((function n(e,t){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=9;break}return i.setFieldsValue({diaDiemId:e}),i.setFieldsValue({nhaCungCapId:t}),a(Object(E.a)(t)),a(Object(F.a)(e)),n.next=7,a(Object(m.c)(e,t));case 7:n.next=10;break;case 9:a(Object(m.j)({}));case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}d.a.useEffect((function(){var n=localStorage.getItem("diaDiemId")||"",e=localStorage.getItem("nhaCungCapId")||null;n&&N(n,e)}),[C,f]);var x=[M.constantTabs.moRong,{label:Object(k.b)(A.a,{form:i,children:Object(k.b)(R.a,{isDanhSachNL:!0,onAfterSelect:function(){var n=Object(r.a)(c.a.mark((function n(e){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Object(E.a)("")),n.next=3,N(e,v);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})}),value:"diaDiemSelect"},{label:Object(k.b)(A.a,{form:i,children:Object(k.b)(z.a,{isAddNew:!0,isTrangQuanLy:!0,diaDiemId:p,onAfterSelect:function(){var n=Object(r.a)(c.a.mark((function n(e){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N(p,e);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})}),value:"nhaCungCapSelect"}].concat(Object(I.a)(l));return Object(k.b)(L.b,{className:"tabs",options:x,activeKey:b?"aside":"",onTabClick:function(n){if("add"===n&&s){if(!O)return Object(T.h)();a(Object(h.c)({modalId:j.d.nguyenLieuModal,data:{}}))}else"aside"===n?a(Object(y.b)({tagPageId:e})):"taiExcel"===n&&a(Object(B.b)({tableId:e,constants:g.a,fileSheet:"danhSachGiaNLSheet",fileName:"danhSachGiaNLName"}))}})},K=j.d.danhSachGiaNLModal;e.default=function(){var n,e,a,t,u=Object(o.b)(),d=Object(o.c)((function(n){return n.danhSachGiaNL})),N=d.loading,L=d.pageSize,y=d.danhSachGiaNLs,I=d.isCapNhatGiaNL,S=Object(o.c)((function(n){var e;return null===(e=n.tagsPage)||void 0===e?void 0:e[K]})),P=Object(o.c)((function(n){return n.diaDiem})).diaDiemId,T=Object(o.c)((function(n){return n.nhaCungCap})).nhaCungCapId,B=Object(o.c)((function(n){return n.account})).accountData,M=null===B||void 0===B||null===(n=B.paths)||void 0===n||null===(e=n.danhSachGiaNL)||void 0===e?void 0:e.edit,R=(null===B||void 0===B||null===(a=B.paths)||void 0===a||null===(t=a.danhSachGiaNL)||void 0===t?void 0:t.edit)&&I,z=Object(v.a)({Instance:f.a,onPending:m.e,addSelectedId:m.a,isEdit:R});return Object(k.c)("div",{className:"danhSachGiaNL-page",css:O.a,children:[Object(k.b)(V,{modalId:K}),Object(k.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[S&&Object(k.b)(x,{}),Object(k.b)("div",{className:"aside-main",children:Object(k.b)(p.a,{isEdit:R,constants:g.a,actions:z,datas:y,loading:N,modalId:K,isSelection:!0,pagination:!0,pageSize:L,onChange:function(n){u(Object(m.k)(n.pageSize))},inputOptions:{isEdit:R},onBlur:function(n){var e=n.target.value;e=Object(w.a)(e),e=Number(e),u(Object(m.f)(P,T,n.target.name,e))},onCallbackDataSource:function(n){return Object(G.orderBy)(n,["tenNhomNguyenLieu","tenNguyenLieu"])},expandable:{rowExpandable:function(){return M},expandedRowRender:function(n){return Object(k.c)("div",{children:[Object(k.c)("div",{children:[Object(k.b)(l.a,{style:{marginRight:"5px"},icon:Object(k.b)(s.a,{}),onClick:function(){console.log(n),M&&u(Object(h.c)({modalId:j.d.nguyenLieuModal,data:n}))},children:"C\u1eadp nh\u1eadt"}),Object(k.b)(b.a,{checkedChildren:"\u1ea8n nguy\xean li\u1ec7u",unCheckedChildren:"B\u1ecf \u1ea9n nguy\xean li\u1ec7u",checked:n.active,onClick:function(){if(!window.confirm("X\xe1c nh\u1eadn \u1ea9n nguy\xean li\u1ec7u ".concat(n.tenNguyenLieu,"?")))return null;u(Object(C.c)(n))}}),Object(k.b)(l.a,{style:{marginLeft:"5px"},onClick:Object(r.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(i.a)(Object(i.a)({},n),{},{nhaCungCapId:T}),e.next=3,u(Object(E.c)(a));case 3:a=e.sent,u(Object(m.h)(a,P));case 5:case"end":return e.stop()}}),e)}))),children:"B\u1ea5m ch\u1ecdn \u0111\u1ec3 l\u01b0u \u0111\u1eb7t h\xe0ng"})]}),Object(k.c)("div",{className:"mt-1",children:["M\xe3 NL: ",n.id]})]})},expandRowByClick:!0}})})]}),Object(k.b)(D.a,{})]})}}}]);