(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[29],{1037:function(e,t,a){},1115:function(e,t,a){"use strict";a.r(t);var n=a(13),i=a(8),c=a(0),r=a.n(c),h=a(6),o=a(48),u=a(202),l=a(417),d=a(201),s=a(415),m=a(158),b=a(272),g=a(60),f=a(133),O=a(146),j={benhVien:{id:"benhVien",name:"N\u01a1i kh\xe1m",width:150,className:"text-small",isSearch:!0,form:{type:"input",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},benhVienXetNghiemPhan:{id:"benhVienXetNghiemPhan",name:"N\u01a1i kh\xe1m XNP",width:150,className:"text-small",isSearch:!0,form:{type:"input"}},ngayKham:{id:"ngayKham",name:"Ng\xe0y kh\xe1m",width:100,align:"center",isSearch:!0,className:"text-small",form:{type:"date-picker",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},ngayKhamXetNghiemPhan:{id:"ngayKhamXetNghiemPhan",name:"Ng\xe0y kh\xe1m XNP",width:100,align:"center",isSearch:!0,className:"text-small",form:{type:"date-picker"}},thangHieuLuc:{id:"thangHieuLuc",name:"Th\xe1ng hi\u1ec7u l\u1ef1c",width:100,className:"text-small",align:"center",form:{type:"input-number",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},thangHieuLucXetNghiemPhan:{id:"thangHieuLucXetNghiemPhan",name:"Th\xe1ng hi\u1ec7u l\u1ef1c XNP",width:100,className:"text-small",align:"center",form:{type:"input-number"}},ngayKhamLai:{id:"ngayKhamLai",name:"Ng\xe0y kh\xe1m l\u1ea1i",width:120,align:"center",isSearch:!0,className:"text-small font-weight-bold"},ngayKhamLaiXetNghiemPhan:{id:"ngayKhamLaiXetNghiemPhan",name:"Ng\xe0y kh\xe1m l\u1ea1i XNP",width:120,align:"center",isSearch:!0,className:"text-small font-weight-bold"},getTableColumns:function(){return[h.constants.stt,g.b.maNV,Object(i.a)(Object(i.a)({},g.b.hoTen),{},{fixed:!0}),O.a.tenDiaDiem,f.a.tenBoPhan,this.benhVien,this.ngayKham,this.thangHieuLuc,this.ngayKhamLai,this.benhVienXetNghiemPhan,this.ngayKhamXetNghiemPhan,this.thangHieuLucXetNghiemPhan,this.ngayKhamLaiXetNghiemPhan,h.constants.capNhatRow]},getInputFields:function(){return[this.benhVien,this.ngayKham,this.thangHieuLuc,this.benhVienXetNghiemPhan,this.ngayKhamXetNghiemPhan,this.thangHieuLucXetNghiemPhan]},getExcelFields:function(){return[h.constants.stt,Object(i.a)({},h.constants.id),g.b.maNV,g.b.hoTen,O.a.tenDiaDiem,f.a.tenBoPhan,Object(i.a)(Object(i.a)({},this.benhVien),{},{name:this.benhVien.id}),Object(i.a)(Object(i.a)({},this.ngayKham),{},{name:this.ngayKham.id}),Object(i.a)(Object(i.a)({},this.thangHieuLuc),{},{name:this.thangHieuLuc.id}),Object(i.a)({},this.ngayKhamLai),Object(i.a)(Object(i.a)({},this.benhVienXetNghiemPhan),{},{name:this.benhVienXetNghiemPhan.id}),Object(i.a)(Object(i.a)({},this.ngayKhamXetNghiemPhan),{},{name:this.ngayKhamXetNghiemPhan.id}),Object(i.a)(Object(i.a)({},this.thangHieuLucXetNghiemPhan),{},{name:this.thangHieuLucXetNghiemPhan.id}),Object(i.a)({},this.ngayKhamLaiXetNghiemPhan)]}},p=a(416),v=a(391),N=a(271),y=a(471),k=a(66),K=a(75),S=a(17);var P=function(e){var t,a=e.dateTimePicker,n=Object(o.b)();return Object(S.b)(S.a,{children:Object(S.b)(s.a,{header:Object(S.b)("div",{className:"font-weight-bold",children:Object(S.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(S.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(S.b)("div",{children:(null===a||void 0===a||null===(t=a.getDayRender)||void 0===t?void 0:t.call(a))||null}),Object(S.b)("div",{})]}),footer:Object(S.b)("div",{children:Object(S.b)(k.a,{icon:Object(S.b)(K.a,{}),onClick:function(){n(Object(l.b)({tagPageId:m.d.khamSucKhoeModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})})})},x=a(3),L=a.n(x),w=a(9),X=a(33),I=(a(1037),a(559)),C=a(412),M=a(484);var T=function(e){var t=e.modalTitle,a=e.onFinishCapNhatDuLieu,n=e.modalId,i=I.a.useForm(),c=Object(X.a)(i,1)[0],u=r.a.useRef(null),l=r.a.useRef(null);n=n||m.d.importModal;var s=Object(o.b)(),b=Object(o.c)((function(e){return e.form})),g=b.modal,f=b.datas,O=Object(o.c)((function(e){return e.importExcel})).sheetHTMLs,j=r.a.useMemo((function(){var e;return!!(null===g||void 0===g||null===(e=g[n||""])||void 0===e?void 0:e.open)}),[g[n]]);function p(){return(p=Object(w.a)(L.a.mark((function e(){var t,a,i;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===u||void 0===u?void 0:u.current)){e.next=7;break}if(a=null===(t=u.current)||void 0===t?void 0:t.files[0],i=a&&a.name?a.name:"",s(Object(M.a)(i))){e.next=5;break}return e.abrupt("return");case 5:s(Object(M.c)(a,n)),u.current.value=null;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(w.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.validateFields();case 2:if(t=e.sent,window.confirm("X\xe1c nh\u1eadn c\u1eadp nh\u1eadt?")){e.next=5;break}return e.abrupt("return");case 5:null===a||void 0===a||a(t),s(Object(d.a)({modalId:n}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){j&&l.current&&(l.current.innerHTML=(null===O||void 0===O?void 0:O[n||""])||"")}),[O,l,n,j]),Object(S.b)(h.MyModal,{title:Object(S.b)("div",{children:t}),visible:j,onClose:function(){s(d.a({modalId:n}))},width:1200,modalId:n,datas:f,footer:null,children:Object(S.c)("div",{children:[Object(S.b)("div",{style:{padding:"10px 0"},children:Object(S.c)(h.MyForm,{form:c,labelCol:{span:4},wrapperCol:{span:20},children:[Object(S.c)(h.MyFormItem,{label:"Ch\u1ecdn file t\u1ea3i",children:[Object(S.b)("input",{ref:u,type:"file",style:{border:"1px solid lightgray",width:"400px"}}),Object(S.b)(k.a,{icon:Object(S.b)(C.a,{}),onClick:function(){return p.apply(this,arguments)},type:"primary",children:"T\u1ea3i file excel l\xean"})]}),Object(S.b)(h.MyFormItem,{label:"Ch\u1ee9c n\u0103ng",children:Object(S.b)(k.a,{type:"dashed",danger:!0,loading:!1,onClick:function(){return v.apply(this,arguments)},children:"X\xe1c nh\u1eadn t\u1ea3i"})})]})}),Object(S.b)("div",{className:"import-excel",ref:l})]})})},V=a(15),H=a(32),D=a.n(H),F=a(35),R=m.d.khamSucKhoeModal;var B=function(e){var t,a,n=e.onAfterAddFinish,i=Object(N.a)({Instance:v.a,onPending:y.e,addSelectedId:y.a}),c=Object(o.b)(),u=Object(o.c)((function(e){return e.form})),l=u.modal,s=u.datas,m=Object(o.c)((function(e){return e.account})).accountData,b=null===m||void 0===m||null===(t=m.paths)||void 0===t||null===(a=t.khamSucKhoe)||void 0===a?void 0:a.edit,g=r.a.useMemo((function(){var e;return!!(null===l||void 0===l||null===(e=l[R])||void 0===e?void 0:e.open)}),[l[R]]);function f(){return(f=Object(w.a)(L.a.mark((function e(t,a){var r,o,u;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return",Object(F.h)());case 2:if(r=!0,o=Object(h.convertMomentToString)(j.getInputFields(),a),!a){e.next=18;break}if(null===t||void 0===t?void 0:t.id){e.next=13;break}return e.next=8,c(i.onAddAsync({validatedValues:o}));case 8:r=e.sent,null===n||void 0===n||n(null===(u=r)||void 0===u?void 0:u.id),r=Boolean(r),e.next=18;break;case 13:return e.t0=Boolean,e.next=16,c(i.onUpdateAsync({currentData:t,validatedValues:o}));case 16:e.t1=e.sent,r=(0,e.t0)(e.t1);case 18:r&&c(d.a({modalId:R}));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(S.b)(h.MyModal,{form:!0,title:Object(S.b)("div",{children:"KhamSucKhoe"}),visible:g,onClose:function(){c(d.a({modalId:R}))},onOkModal:function(e,t){return f.apply(this,arguments)},formOptions:Object(h.getFormItemFields)(j.getInputFields()),formProps:{labelCol:{span:8},wrapperCol:{span:16}},width:700,modalId:R,datas:s})},E=a(893),A=m.d.khamSucKhoeModal;t.default=function(){var e,t,a=Object(o.b)(),c=Object(o.c)((function(e){return e.khamSucKhoe})),g=c.tabsData,f=c.khamSucKhoeLoading,O=c.pageSize,k=c.khamSucKhoes,K=Object(o.c)((function(e){var t;return null===(t=e.tagsPage)||void 0===t?void 0:t[A]})),x=Object(o.c)((function(e){return e.nhanSu})).nhanSus,L=Object(o.c)((function(e){return e.account})).accountData,w=null===L||void 0===L||null===(e=L.paths)||void 0===e||null===(t=e.khamSucKhoe)||void 0===t?void 0:t.edit,X=Object(N.a)({Instance:v.a,onPending:y.e,addSelectedId:y.a,isEdit:w});var I=r.a.useMemo((function(){if(!x)return{};var e=a(Object(E.a)());return(e=Object.values(e).map((function(e){var t=(null===k||void 0===k?void 0:k[e.id])||{},a=t.ngayKham,n=t.thangHieuLuc,c=t.ngayKhamXetNghiemPhan,r=t.thangHieuLucXetNghiemPhan,h=a&&n?D()(a,"L").add(n,"month").format("L"):"",o=c&&r?D()(c,"L").add(r,"month").format("L"):"";return Object(i.a)(Object(i.a)(Object(i.a)({},e),t),{},{ngayKhamLai:h,ngayKhamLaiXetNghiemPhan:o})}))).reduce((function(e,t){return Object(i.a)(Object(i.a)({},e),{},Object(n.a)({},t.id,t))}),{})}),[x,k]);return r.a.useEffect((function(){return a(Object(y.c)()),function(){Object(V.l)("khamSucKhoe")}}),[]),Object(S.c)("div",{className:"khamSucKhoe-page",css:b.a,children:[Object(S.b)(s.b,{className:"tabs",options:g,activeKey:K?"aside":"",onTabClick:function(e){if("aside"===e)a(Object(l.b)({tagPageId:A}));else if("taiExcel"===e){var t=Object.values(I);t=Object(h.onCallBackDatasourceStringNumberService)("maNV",t),a(Object(u.b)({tableId:A,constants:j,fileSheet:"khamSucKhoeSheet",fileName:"khamSucKhoeName",dataSource:t})),console.log(t)}else"import-excel"===e&&a(Object(d.c)({modalId:m.d.importKhamSucKhoeModal}))}}),Object(S.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[K&&Object(S.b)(P,{}),Object(S.b)("div",{className:"aside-main",children:Object(S.b)(p.a,{isEdit:w,constants:j,onCallbackDataSource:function(e){return Object(h.onCallBackDatasourceStringNumberService)("maNV",e)},actions:X,datas:I,loading:f,modalId:A,expandable:{expandedRowRender:function(e){return Object(S.b)("div",{children:e.id})},expandRowByClick:!1},isSelection:!1,pagination:!0,pageSize:O,onChange:function(e){a(Object(y.f)(e.pageSize))},onRow:function(e){return{onClick:function(){var t=Object(h.convertToMoment)(j.getInputFields(),e);w&&a(Object(d.c)({modalId:A,data:t}))}}}})})]}),Object(S.b)(T,{modalTitle:"D\u1eef li\u1ec7u kh\xe1m s\u1ee9c kh\u1ecfe",modalId:m.d.importKhamSucKhoeModal,onFinishCapNhatDuLieu:function(e){a(Object(y.d)(e))}}),Object(S.b)(B,{})]})}},893:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(13),i=a(8);function c(){return function(e,t){var a=t().nhanSu.nhanSus,c=Object.values(a||{});return(c=c.filter((function(e){return e.active&&"working"===e.trangThaiNhanSuId}))).reduce((function(e,t){return Object(i.a)(Object(i.a)({},e),{},Object(n.a)({},t.id,t))}),{})}}}}]);