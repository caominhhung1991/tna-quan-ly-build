(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[12],{1032:function(e,n,t){},1096:function(e,n,t){"use strict";t.r(n);var i=t(21),a=t(33),c=(t(1032),t(0)),o=t.n(c),r=t(556),l=t(48),d=t(413),u=t(158),s=t(271),b=t(6),m={time:{id:"time",name:"Time",width:100,className:"text-small",form:{type:"date-picker",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},getTableColumns:function(){return[b.constants.stt,this.time,b.constants.active,b.constants.editRow]},getInputFields:function(){return[this.time]}},f=t(442),v=t(202),h=t(787),O=t(15),j=t(416),g=t(420),p=t(797),C=t(7),y=t(304),D=t(17);function M(e,n){return function(t,i){var a=i().fingerprint.quetVanTays,c=n.onClick,o=e.children,r=e.contentClass,l=(null===a||void 0===a?void 0:a[null===e||void 0===e?void 0:e.id])||{},d=l.emps,u=void 0===d?[]:d,s=null===u||void 0===u?void 0:u.length,b=t(function(e,n){return function(t){return(e||[]).reduce((function(e,i){var a=t(I(null===i||void 0===i?void 0:i.nhanVienId,n)).isDiLam,c=((null===e||void 0===e?void 0:e.coDiLam)||0)+(a?1:0),o=((null===e||void 0===e?void 0:e.khongDiLam)||0)+(a?0:1);return Object(C.a)(Object(C.a)({},e),{},{coDiLam:c,khongDiLam:o})}),{})}}(u,n)),m=b.coDiLam,f=b.khongDiLam,v=t(function(e,n,t){return function(i,a){var c=a().fingerprint.xemGioVaoRa,o=n.isFullName,r=n.contentItemClass,l=void 0===r?"":r;return(e||[]).map((function(e,n){var a=(e||{}).nhanVienId,r=i(function(e,n){return function(t,i){var a=i().nhanSu.nhanSuDatas,c=((null===a||void 0===a?void 0:a[e])||{}).hoTen,o=void 0===c?"":c,r=o.split(" "),l=r.length;return n?o:(null===r||void 0===r?void 0:r[l-1])||"--"}}(a,o)),d=i(I(a,t)),u=d.gioVao,s=d.gioRa,b=d.isDiLam,m=d.color,f=d.textColor;return Object(D.c)("div",{className:l,style:{marginBottom:"2px"},children:[Object(D.b)("div",{children:Object(D.b)(y.a,{color:m,style:{width:"100%"},children:Object(D.b)("span",{style:{color:f},children:r})})}),c&&b&&Object(D.b)("div",{className:"text-center",children:Object(D.c)("small",{className:"font-weight-bold",children:[u," - ",s]})})]},a||n)}))}}(u,e,n));return Object(D.c)("li",{className:(null===e||void 0===e?void 0:e.liClass)||"",children:[Object(D.c)("div",{className:"title hoverClass",onClick:function(){return null===c||void 0===c?void 0:c(Object(C.a)(Object(C.a)({},e),l))},children:[Object(D.b)("div",{className:"font-weight-bold text-dark",children:(null===e||void 0===e?void 0:e.title)||""}),Object(D.b)("div",{className:r||"text-left",children:v}),Object(D.c)("div",{className:"text-center",children:["\u03a3",s,": ",m,f?Object(D.c)("span",{className:"mr-1 text-danger",children:[" + ",f]}):null]})]}),Array.isArray(o)&&Object(D.b)("ul",{children:o.map((function(e){return t(M(e,n))}))})]},null===e||void 0===e?void 0:e.id)}}function I(e,n){return function(t,i){var a,c,o=n.tongHopDiemDanhsNextMonth,r=n.selectedTime,l=n.fingerprintConfigIndex,d=i(),u=d.caLamViec.caLamViecId,s=d.fingerprint.tongHopDiemDanhDatasArray,b=null===s||void 0===s?void 0:s[l],m=r?"ngayQuet".concat(r.format("DD")):"",f=r?"ngayQuet".concat(r.clone().add(1,"day").format("DD")):"",v=(null===b||void 0===b||null===(a=b[e])||void 0===a?void 0:a[m])||{},h=(null===b||void 0===b||null===(c=b[e])||void 0===c?void 0:c[f])||{},O=v.gioVao,j=v.gioRa;if("caDem"===u){var g,p;h=r.clone().endOf("month").format("DD-MM-YYYY")===r.format("DD-MM-YYYY")?null===o||void 0===o||null===(g=o[e])||void 0===g?void 0:g[f]:h;var C=(O=(null===v||void 0===v?void 0:v.gioRa)||"").split(":"),y=Number((null===C||void 0===C?void 0:C[0])||0);(y=isNaN(y)?0:y)<10&&(O=null),j=null===(p=h)||void 0===p?void 0:p.gioVao}var D=O||j;return{gioVao:O,gioRa:j,color:D?"#88a5ff":"#cd201f",textColor:D?"#000000":"",isDiLam:D}}}var N=t(3),w=t.n(N),x=t(9),S=t(13),T=t(35),V=t(66),k=t(59),L=t(60),F=t(134),Y={getTableColumns:function(){return[b.constants.stt,L.b.maNV,L.b.hoTen,F.a.tenChucVu,b.constants.editRow]},getInputFields:function(){return[b.constants.stt,b.constants.id]},getExcelFields:function(){return[b.constants.stt,b.constants.active]}},R=t(414),B=t(456),E=t(859),P=t(807),A=u.d.fingerprintChiTietModal;var G=function(){var e=Object(l.b)(),n=r.a.useForm(),t=Object(a.a)(n,1)[0],i=Object(l.c)((function(e){return e.form})),c=i.modal,d=i.datas,u=o.a.useMemo((function(){var e;return!!(null===c||void 0===c||null===(e=c[A])||void 0===e?void 0:e.open)}),[c[A]]),s=null===d||void 0===d?void 0:d[A];function m(){return(m=Object(x.a)(w.a.mark((function n(){var i,a;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.validateFields();case 2:i=n.sent,a=Object(b.convertMomentToString)(Y.getInputFields(),i),e(Object(B.c)({convertedData:a,nameOfId:"nhanSuId"})),e(Object(b.closeModal)({modalId:A}));case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return o.a.useEffect((function(){u?u&&s&&t.setFieldsValue(Object(C.a)(Object(C.a)({},s),{},{nhanSuId:s.id})):t.resetFields()}),[u,s]),Object(D.b)(b.MyModal,{title:Object(D.b)("div",{children:"Fingerprint"}),visible:u,onClose:function(){e(Object(b.closeModal)({modalId:A}))},onOkModal:function(){return m.apply(this,arguments)},width:900,modalId:A,datas:d,children:Object(D.c)(b.MyForm,{form:t,labelCol:{span:6},wrapperCol:{span:18},children:[Object(D.b)(E.a,{name:"id",label:"id",disabled:!0}),Object(D.b)(P.a,{})]})})},H=u.d.fingerprintChiTietModal;var q=function(e){var n=Object(l.b)(),t=Object(l.c)((function(e){return e.nhanSu})).nhanSus,i=Object(l.c)((function(e){return e.fingerprintChiTiet})).fingerprintChiTiets,a=o.a.useMemo((function(){return Object.values(i).map((function(e){return(null===t||void 0===t?void 0:t[e.id])||e}))}),[i,t]);return Object(D.c)("div",{className:"fingerprintChiTiet-page",css:s.a,children:[Object(D.b)("div",{style:{marginBottom:"7px"},children:Object(D.b)(V.a,{icon:Object(D.b)(k.a,{}),type:"primary",onClick:function(){n(Object(b.openModal)({modalId:H}))},children:"Th\xeam nh\xe2n s\u1ef1"})}),Object(D.b)(R.a,{isEdit:!0,constants:Y,onCallbackDataSource:function(e){return Object(b.onCallbackDataSource)("tenMatHang",e)},datas:a,modalId:H,isSelection:!1,pagination:!1,inputOptions:{onDeleteItem:function(e){n(Object(B.b)(e))}}}),Object(D.b)(G,{})]})},Q=u.d.fingerprintModal;var J=function(e){var n,t,i=Object(l.b)(),c=Object(l.c)((function(e){return e.form})),d=c.modal,u=c.datas,s=Object(l.c)((function(e){return e.account})).accountData,m=null===s||void 0===s||null===(n=s.paths)||void 0===n||null===(t=n.fingerprint)||void 0===t?void 0:t.edit,v=o.a.useMemo((function(){var e;return!!(null===d||void 0===d||null===(e=d[Q])||void 0===e?void 0:e.open)}),[d[Q]]),h=r.a.useForm(),O=Object(a.a)(h,1)[0],j=null===u||void 0===u?void 0:u[Q];return o.a.useEffect((function(){if(v){if(v&&j){var e=((null===j||void 0===j?void 0:j.emps)||[]).reduce((function(e,n){return Object(C.a)(Object(C.a)({},e),{},Object(S.a)({},n.nhanVienId,{id:n.nhanVienId,nhanSuId:n.nhanVienId}))}),{});i(Object(B.d)(e)),O.setFieldsValue(j)}}else O.resetFields()}),[v,j]),Object(D.b)(b.MyModal,{title:Object(D.c)("div",{children:["Fingerprint: ",null===j||void 0===j?void 0:j.title]}),visible:v,onClose:function(){i(Object(b.closeModal)({modalId:Q}))},onOkModal:function(){if(!m)return Object(T.h)();i(Object(b.onConfirmOk)(Object(x.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!0,i(Object(f.g)(j)),i(Object(b.closeModal)({modalId:Q}));case 3:case"end":return e.stop()}}),e)})))))},width:700,modalId:Q,datas:u,children:Object(D.b)(q,{})})};var K=function(e){var n=e.selectedTime,t=Object(l.b)(),i=Object(l.c)((function(e){return e.nhanSu})).nhanSuDatas,a=Object(l.c)((function(e){return e.fingerprint})),c=a.fingerprints,r=a.tongHopDiemDanhDatasArray,d=a.quetVanTays,s=a.xemGioVaoRa,m=c.xuongComBinhDuongConfig,f=c.vanTayNhanVienVanPhongConfig,v=c.vanTayQuayNuocConfig;function h(e){t(Object(b.openModal)({modalId:u.d.fingerprintModal,data:e}))}var O=o.a.useMemo((function(){return m?t(M(m,{fingerprintConfigIndex:0,selectedTime:n,onClick:h})):null}),[n,c,d,r,i,s]),j=o.a.useMemo((function(){return f?t(M(f,{fingerprintConfigIndex:0,selectedTime:n,onClick:h})):null}),[n,c,d,r,i,s]),g=o.a.useMemo((function(){return v?t(M(v,{fingerprintConfigIndex:0,selectedTime:n,onClick:h})):null}),[n,c,d,r,i,s]);return Object(D.c)("div",{children:[Object(D.b)("div",{className:"tree",children:Object(D.b)("ul",{children:O})}),Object(D.b)("div",{className:"tree",children:Object(D.b)("ul",{children:j})}),Object(D.b)("div",{className:"tree",children:Object(D.b)("ul",{children:g})}),Object(D.b)(J,{})]})},z=t(569),U=t(169),X=t(75),W=t(849);var Z=function(e){var n=e.selectedTime,t=Object(l.b)(),i=Object(l.c)((function(e){return e.account})).isDev,a=Object(l.c)((function(e){return e.fingerprint})),c=a.loading,o=a.xemGioVaoRa;return Object(D.b)(D.a,{children:Object(D.b)(d.a,{header:Object(D.b)("div",{className:"font-weight-bold",children:"Th\xf4ng Tin Trang"}),body:Object(D.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(D.b)("div",{style:{marginBottom:"7px"},children:Object(D.b)(V.a,{block:!0,icon:Object(D.b)(z.a,{}),onClick:function(){if(!n)return Object(b.thongBaoDaLoi)();t(Object(b.onConfirmOk)((function(){var e=n.format("YYYY-MM-DD"),i=n.clone().add(1,"day").format("YYYY-MM-DD"),a=n.format("MM-YY");t(function(e,n,t){return function(i){var a=["chamCong",e,n].join("/");console.log("".concat(W.a,"/").concat(a)),i(Object(f.e)(!0)),fetch("".concat(W.a,"/").concat(a)).then((function(){Object(b.thongBaoDaLuu)(),i(Object(f.c)(["xuongBinhDuong"],t))})).catch((function(e){console.log(e)})).finally((function(){i(Object(f.e)(!1))}))}}(e,i,a))})))},loading:c,children:"C\u1eadp nh\u1eadt v\xe2n tay nh\xe2n vi\xean"})}),Object(D.b)("div",{style:{marginBottom:"7px"},children:Object(D.c)(V.a,{block:!0,icon:Object(D.b)(U.a,{}),onClick:function(){t(Object(f.h)(!o))},type:o?"primary":"default",children:[o?"\u0110\xf3ng":"Xem"," gi\u1edd v\xe0o, gi\u1edd ra"]})}),i&&Object(D.b)("div",{children:Object(D.b)(V.a,{onClick:function(){t(Object(f.f)("xuongBinhDuong"))},children:"Update fingerprint config"})})]}),footer:Object(D.b)("div",{children:Object(D.b)(V.a,{icon:Object(D.b)(X.a,{}),onClick:function(){t(Object(b.toggleAside)({tagPageId:u.d.fingerprintModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})})})},$=u.d.fingerprintModal;n.default=function(){var e=Object(l.b)(),n=r.a.useForm(),t=Object(a.a)(n,1)[0],c=Object(l.c)((function(e){var n;return null===(n=e.tagsPage)||void 0===n?void 0:n[$]})),u=Object(l.c)((function(e){return e.diaDiem})).diaDiemId,C=Object(l.c)((function(e){return e.caLamViec})).caLamViecId,y=Object(l.c)((function(e){return e.fingerprint})).tabsData,M=Object(b.useDatePicker)({}),I=Object(a.a)(M,2),N=I[0],w=I[1];var x=o.a.useMemo((function(){return[].concat(Object(i.a)(y||[]),[{label:Object(D.b)(r.a,{form:t,children:Object(D.b)(h.a,{style:{width:"180px"},isDanhSachNL:!0})}),value:"diaDiemSelect"},{label:w.getDayRender(),value:"daySelect"},{label:Object(D.b)(r.a,{form:t,children:Object(D.b)(p.a,{style:{width:110}})}),value:"caLamViecSelect"}])}),[N]);return o.a.useEffect((function(){return e(Object(f.d)(u)),function(){Object(O.l)("diaDiemId")}}),[u]),o.a.useEffect((function(){var n,t=null===N||void 0===N||null===(n=N.format)||void 0===n?void 0:n.call(N,"MM-YY");e(Object(f.c)(["xuongBinhDuong","xuongDauGiay","xuongCoKhi"],t))}),[N]),o.a.useEffect((function(){e(Object(f.b)(u,C))}),[u,C]),o.a.useEffect((function(){var n=localStorage.getItem("diaDiemId"),i=localStorage.getItem("caLamViecId");e(Object(j.a)(n)),e(Object(g.addSelectedId)(i)),t.setFieldsValue({diaDiemId:n,caLamViecId:i})}),[]),Object(D.c)("div",{className:"fingerprint-page",css:s.a,children:[Object(D.b)(d.b,{className:"tabs",options:x,activeKey:c?"aside":"",onTabClick:function(n){"taiExcel"===n?e(Object(v.b)({tableId:$,constants:m,fileSheet:"fingerprint",fileName:"fingerprint"})):"aside"===n&&e(Object(b.toggleAside)({tagPageId:$}))}}),Object(D.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[c&&Object(D.b)(Z,{selectedTime:N}),Object(D.b)("div",{className:"over-flow-scroll",children:Object(D.b)(K,{selectedTime:N})})]})]})}},787:function(e,n,t){"use strict";var i=t(0),a=t.n(i),c=t(6),o=t(48),r=t(416),l=t(17);n.a=function(e){var n=e.form,t=e.name,i=e.mode,d=e.label,u=e.labelCol,s=e.wrapperCol,b=e.rules,m=e.onAfterSelect,f=e.disabled,v=e.isDanhSachNL,h=e.isDontStoreState,O=e.style,j=Object(o.b)(),g=Object(o.c)((function(e){return e.diaDiem})).diaDiems,p=a.a.useMemo((function(){var e=Object.values(g).filter((function(e){return e.active}));return v&&(e=e.filter((function(e){return e.danhSachNL}))),e.map((function(e){var n="".concat(e.tenDiaDiem);return{value:e.id,label:n}}))}),[g]);var C=Object(l.b)(c.MyFormItem,{label:null!==d&&void 0!==d?d:"\u0110\u1ecba \u0111i\u1ec3m",type:"select",name:null!==t&&void 0!==t?t:"diaDiemId",innerProps:{mode:i,showSearch:!0,allowClear:!0,filterOption:c.onSelectSearch,onChange:function(e){h||j(Object(r.a)(e)),null===m||void 0===m||m(e)},disabled:f,style:O},options:p,rules:null!==b&&void 0!==b?b:[]});return n?Object(l.b)(l.a,{children:Object(l.b)(c.MyForm,{form:n,labelCol:null!==u&&void 0!==u?u:{span:8},wrapperCol:null!==s&&void 0!==s?s:{span:16},children:C})}):Object(l.b)(l.a,{children:C})}},797:function(e,n,t){"use strict";var i=t(0),a=t.n(i),c=t(6),o=t(48),r=t(420),l=t(17);n.a=function(e){var n=e.form,t=e.style,i=Object(o.b)(),d=Object(o.c)((function(e){return e.caLamViec})).caLamViecs,u=a.a.useMemo((function(){return Object.values(d||{}).map((function(e){var n=e.tenCaLamViec;return{value:e.id,label:n}}))}),[d]);var s=Object(l.b)(c.MyFormItem,{label:"Ca L\xe0m Vi\u1ec7c",type:"select",name:"caLamViecId",innerProps:{style:t,showSearch:!0,allowClear:!0,filterOption:c.onSelectSearch,onChange:function(e){i(Object(r.addSelectedId)(e))}},options:u});return n?Object(l.b)(c.MyForm,{form:n,labelCol:{span:8},wrapperCol:{span:16},children:s}):s}},807:function(e,n,t){"use strict";var i=t(0),a=t.n(i),c=t(6),o=t(48),r=t(128),l=t(17);n.a=function(e){var n=e.form,t=e.mode,i=e.label,d=e.labelCol,u=e.wrapperCol,s=e.rules,b=Object(o.b)(),m=Object(o.c)((function(e){return e.nhanSu})).nhanSus,f=a.a.useMemo((function(){return Object.values(m).filter((function(e){return e.active})).map((function(e){var n="".concat(e.maNV," - ").concat(e.hoTen);return{value:e.id,label:n}}))}),[m]);var v=Object(l.b)(c.MyFormItem,{label:null!==i&&void 0!==i?i:"Nh\xe2n s\u1ef1",type:"select",name:"nhanSuId",innerProps:{mode:t,showSearch:!0,allowClear:!0,filterOption:c.onSelectSearch,onChange:function(e){b(Object(r.a)(e))}},options:f,rules:s||[]});return n?Object(l.b)(c.MyForm,{form:n,labelCol:d||{span:8},wrapperCol:u||{span:16},children:v}):v}},849:function(e,n,t){"use strict";t.d(n,"b",(function(){return d})),t.d(n,"a",(function(){return u}));var i=t(6),a=(t(0),t(66)),c=t(333),o=t(71),r=t(17);var l=function(e,n,t,i){var l=((null===i||void 0===i?void 0:i.inputOptions)||{}).onCopyRow,d=void 0===l?o.noop:l;return Object(r.b)(a.a,{block:!0,size:"small",icon:Object(r.b)(c.a,{}),onClick:function(e){e.stopPropagation(),null===d||void 0===d||d(n)}})},d={ngay:{id:"ngay",name:"Ng\xe0y",className:"text-small",align:"center",width:100,sorter:Object(i.sortByText)("ngay"),defaultSortOrder:"ascend",form:{type:"date-picker"}},conLai:{id:"conLai",name:"C\xf2n l\u1ea1i",className:"text-small font-weight-bold",align:"right",width:100,render:i.numberRender},soLuong:{id:"soLuong",name:"S\u1ed1 l\u01b0\u1ee3ng",width:100,className:"text-small font-weight-bold",align:"right"},donGia:{id:"donGia",name:"\u0110\u01a1n gi\xe1",width:100,className:"text-small font-weight-bold",align:"right",render:i.numberRender},thanhTien:{id:"thanhTien",name:"Th\xe0nh ti\u1ec1n",width:100,className:"text-small font-weight-bold",align:"right",render:i.numberRender},copyRow:{id:"copyRow",name:"Copy",width:100,className:"text-small font-weight-bold",align:"center",render:l}},u="http://api.osac.vn"},859:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));t(0);var i=t(6),a=t(212),c=t(17);function o(e){var n=e.name,t=e.label,o=e.onPressEnter,r=e.rules,l=e.disabled,d=e.autoFocus,u=e.classNameItem,s=e.className;return Object(c.b)(i.MyFormItem,{name:n,label:t,rules:r,className:u,children:Object(c.b)(a.a,{autoFocus:d,disabled:l,onPressEnter:o,className:s})})}}}]);