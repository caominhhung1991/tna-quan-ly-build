(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[13],{1093:function(e,n,t){"use strict";t.r(n);var a=t(7),i=t(21),r=t(33),c=t(0),o=t.n(c),l=t(48),s=t(202),u=t(201),d=t(413),h=t(158),m=t(271),b=t(556),f=t(860),g=t(414),p=t(896),v=t(292),O=t(270),j=t(425),w=t(112),y=t(35),x=t(15),C=t(816),D=t(787),N=t(17),k=h.d.nhomKhachHangModal;n.default=function(){var e,n,t=Object(l.b)(),c=Object(l.c)((function(e){return e.thietLapTDDT})),h=c.loading,H=c.pageSize,I=c.nhomKhachHangs,S=Object(l.c)((function(e){var n;return null===(n=e.tagsPage)||void 0===n?void 0:n[k]})),M=Object(l.c)((function(e){return e.diaDiem})).diaDiemId,K=Object(l.c)((function(e){return e.account})).accountData,T=null===K||void 0===K||null===(e=K.paths)||void 0===e||null===(n=e.nhomKhachHang)||void 0===n?void 0:n.edit,R=Object(O.a)({Instance:v.a,onPending:w.f,addSelectedId:w.a,isEdit:T}),P=b.a.useForm(),L=Object(r.a)(P,1)[0];o.a.useEffect((function(){L.setFieldsValue({diaDiemId:M})}),[M]),o.a.useEffect((function(){return M&&(t(Object(C.c)(M)),t(Object(j.f)(M))),function(){Object(x.l)("khachHangDuTru"),Object(x.l)("nhomKhachHang")}}),[M]);var F=o.a.useMemo((function(){return[{label:Object(N.b)(b.a,{form:L,children:Object(N.b)(D.a,{style:{width:180},isDanhSachNL:!0})}),value:"null"}].concat(Object(i.a)(j.d))}),[]);return Object(N.c)("div",{className:"nhomKhachHang-page",css:m.a,children:[Object(N.b)(d.b,{className:"tabs",options:F,activeKey:S?"aside":"",onTabClick:function(e){if("add"===e&&T){if(!T)return Object(y.h)();var n=new v.a;t(Object(u.c)({modalId:k,data:n.initData}))}else"taiExcel"===e&&t(Object(s.b)({tableId:k,constants:f.a,fileSheet:"nhomKhachHangSheet",fileName:"nhomKhachHangName"}))}}),Object(N.b)("div",{className:"tabs-main",style:{marginTop:"10px"},children:Object(N.b)("div",{className:"aside-main",children:Object(N.b)(g.a,{isEdit:T,constants:f.a,actions:R,datas:I,loading:h,modalId:k,expandable:{expandedRowRender:function(e){return Object(N.b)("div",{children:e.id})},expandRowByClick:!1},isSelection:!0,pagination:!0,pageSize:H,inputOptions:{onCopyRow:function(e){var n=(null===e||void 0===e?void 0:e.name)+" copy",i=Object(a.a)(Object(a.a)({},e),{},{id:null,name:n});t(Object(u.c)({modalId:k,data:i}))}},onChange:function(e){t(Object(w.k)(e.pageSize))}})})}),Object(N.b)(p.a,{})]})}},787:function(e,n,t){"use strict";var a=t(0),i=t.n(a),r=t(6),c=t(48),o=t(416),l=t(17);n.a=function(e){var n=e.form,t=e.name,a=e.mode,s=e.label,u=e.labelCol,d=e.wrapperCol,h=e.rules,m=e.onAfterSelect,b=e.disabled,f=e.isDanhSachNL,g=e.isDontStoreState,p=e.style,v=Object(c.b)(),O=Object(c.c)((function(e){return e.diaDiem})).diaDiems,j=i.a.useMemo((function(){var e=Object.values(O).filter((function(e){return e.active}));return f&&(e=e.filter((function(e){return e.danhSachNL}))),e.map((function(e){var n="".concat(e.tenDiaDiem);return{value:e.id,label:n}}))}),[O]);var w=Object(l.b)(r.MyFormItem,{label:null!==s&&void 0!==s?s:"\u0110\u1ecba \u0111i\u1ec3m",type:"select",name:null!==t&&void 0!==t?t:"diaDiemId",innerProps:{mode:a,showSearch:!0,allowClear:!0,filterOption:r.onSelectSearch,onChange:function(e){g||v(Object(o.a)(e)),null===m||void 0===m||m(e)},disabled:b,style:p},options:j,rules:null!==h&&void 0!==h?h:[]});return n?Object(l.b)(l.a,{children:Object(l.b)(r.MyForm,{form:n,labelCol:null!==u&&void 0!==u?u:{span:8},wrapperCol:null!==d&&void 0!==d?d:{span:16},children:w})}):Object(l.b)(l.a,{children:w})}},808:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var a=t(10),i=t(19),r=t(20),c=t(6),o=function(e){Object(i.a)(t,e);var n=Object(r.a)(t);function t(){var e;Object(a.a)(this,t);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=n.call.apply(n,[this].concat(r))).pathDatas=["thucDonDuTru","settings","khachHang"],e.pathDeleted=["thucDonDuTru","settings","deleted","khachHang"],e.initData={},e}return t}(c.AppClass)},816:function(e,n,t){"use strict";t.d(n,"b",(function(){return m})),t.d(n,"c",(function(){return b})),t.d(n,"a",(function(){return f}));var a=t(3),i=t.n(a),r=t(9),c=t(13),o=t(7),l=t(59),s=t(808),u=t(15),d=t(16),h=t(112),m=[{label:"Th\xeam m\u1edbi",value:"add",Icon:l.a}],b=function(e){return function(n){if(!e)return n(Object(h.g)({})),!1;n(Object(h.f)(!0));var t=Object(d.d)(),a=(new s.a).getPathDatas(e),i=Object(d.i)(t,a),r=Object(u.g)(i,(function(e){var t=e.val()||{};t=Object.values(t).reduce((function(e,n){return Object(o.a)(Object(o.a)({},e),{},Object(c.a)({},n.id+"",Object(o.a)(Object(o.a)({},n),{},{id:n.id+""})))}),{}),n(Object(h.g)(t))}));u.f.push(["khachHangDuTru",r]),n(Object(h.f)(!1))}},f=function(e,n){return function(){var t=Object(r.a)(i.a.mark((function t(a,r){var c,l,s,u,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=n||"khachHangId",null===e||void 0===e?void 0:e[l]){t.next=3;break}return t.abrupt("return",Object(o.a)(Object(o.a)({},e),{},{tenKhachHang:""}));case 3:return s=r().thietLapTDDT.khachHangs,(null===(c=e[l])||void 0===c?void 0:c.length)&&"string"!==typeof e[l]?u=e[l].map((function(e){var n=(null===s||void 0===s?void 0:s[e])||{};return"".concat(n.name||n.tenKhachHang||"")})).join(", "):(d=(null===s||void 0===s?void 0:s[e[l]])||{},u="".concat(d.name||"")),t.abrupt("return",Object(o.a)(Object(o.a)({},e),{},{tenKhachHang:u}));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},829:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var a=t(6),i={name:{id:"name",name:"T\xean kh\xe1ch h\xe0ng",width:120,className:"text-small font-weight-bold",form:{type:"input",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},tenKhachHang:{id:"tenKhachHang",name:"T\xean kh\xe1ch h\xe0ng",width:120,className:"text-small font-weight-bold"},soMonMan:{id:"soMonMan",name:"S\u1ed1 m\xf3n m\u1eb7n",width:120,className:"text-small font-weight-bold",form:{type:"input-number",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},getTableColumns:function(){return[a.constants.stt,this.name,this.soMonMan,a.constants.active,a.constants.editRow]},getInputFields:function(){return[this.name,this.soMonMan]},getExcelFields:function(){return[this.name,this.soMonMan,a.constants.active]}}},849:function(e,n,t){"use strict";t.d(n,"b",(function(){return s})),t.d(n,"a",(function(){return u}));var a=t(6),i=(t(0),t(66)),r=t(333),c=t(71),o=t(17);var l=function(e,n,t,a){var l=((null===a||void 0===a?void 0:a.inputOptions)||{}).onCopyRow,s=void 0===l?c.noop:l;return Object(o.b)(i.a,{block:!0,size:"small",icon:Object(o.b)(r.a,{}),onClick:function(e){e.stopPropagation(),null===s||void 0===s||s(n)}})},s={ngay:{id:"ngay",name:"Ng\xe0y",className:"text-small",align:"center",width:100,sorter:Object(a.sortByText)("ngay"),defaultSortOrder:"ascend",form:{type:"date-picker"}},conLai:{id:"conLai",name:"C\xf2n l\u1ea1i",className:"text-small font-weight-bold",align:"right",width:100,render:a.numberRender},soLuong:{id:"soLuong",name:"S\u1ed1 l\u01b0\u1ee3ng",width:100,className:"text-small font-weight-bold",align:"right"},donGia:{id:"donGia",name:"\u0110\u01a1n gi\xe1",width:100,className:"text-small font-weight-bold",align:"right",render:a.numberRender},thanhTien:{id:"thanhTien",name:"Th\xe0nh ti\u1ec1n",width:100,className:"text-small font-weight-bold",align:"right",render:a.numberRender},copyRow:{id:"copyRow",name:"Copy",width:100,className:"text-small font-weight-bold",align:"center",render:l}},u="http://api.osac.vn"},860:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var a=t(7),i=t(6),r=t(829),c=t(849),o={name:{id:"name",name:"T\xean nh\xf3m gi\xe1",width:130,className:"text-small font-weight-bold",form:{type:"input",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},giaPhanAn:{id:"giaPhanAn",name:"Gi\xe1 ph\u1ea7n \u0103n",width:100,className:"text-small font-weight-bold",align:"right",form:{type:"input-number-format",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]},render:i.numberRender},gas:{id:"gas",name:"Gas",width:100,className:"text-small",align:"right",form:{type:"input-number-format"},render:i.numberRender},giaVi:{id:"giaVi",name:"Gia v\u1ecb",width:100,className:"text-small",align:"right",form:{type:"input-number-format"},render:i.numberRender},gao:{id:"gao",name:"G\u1ea1o",width:100,className:"text-small",align:"right",form:{type:"input-number-format"},render:i.numberRender},dinhLuongGao:{id:"dinhLuongGao",name:"\u0110L g\u1ea1o",width:100,className:"text-small",align:"right",form:{type:"input-number-format"},render:i.numberRender},vanChuyen:{id:"vanChuyen",name:"V. chuy\u1ec3n",width:100,className:"text-small",align:"right",form:{type:"input-number-format"},render:i.numberRender},chiPhiKhac:{id:"chiPhiKhac",name:"CP kh\xe1c",width:100,className:"text-small",align:"right",form:{type:"input-number-format"},render:i.numberRender},getTableColumns:function(){return[i.constants.stt,Object(a.a)(Object(a.a)({},this.name),{},{fixed:!0}),c.b.copyRow,this.giaPhanAn,this.gas,this.giaVi,this.gao,this.dinhLuongGao,this.vanChuyen,this.chiPhiKhac,r.a.tenKhachHang,i.constants.active,i.constants.editRow]},getInputFields:function(){return[this.name,this.giaPhanAn,this.gas,this.giaVi,this.gao,this.dinhLuongGao,this.vanChuyen,this.chiPhiKhac]},getExcelFields:function(){return[this.name,i.constants.active]}}},896:function(e,n,t){"use strict";var a=t(3),i=t.n(a),r=t(7),c=t(9),o=t(0),l=t.n(o),s=t(6),u=t(48),d=t(201),h=t(860),m=t(270),b=t(292),f=t(158),g=t(112),p=t(35),v=t(17),O=function(e){var n=e.form,t=e.name,a=e.mode,i=e.label,r=e.labelCol,c=e.wrapperCol,o=e.rules,d=e.onAfterSelect,h=e.disabled,m=Object(u.c)((function(e){return e.thietLapTDDT})).khachHangs,b=l.a.useMemo((function(){return Object.values(m).filter((function(e){return e.active})).map((function(e){var n="".concat(e.name);return{value:e.id+"",label:n}}))}),[m]);var f=Object(v.b)(s.MyFormItem,{label:null!==i&&void 0!==i?i:"Kh\xe1ch h\xe0ng",type:"select",name:null!==t&&void 0!==t?t:"khachHangId",innerProps:{mode:a,showSearch:!0,allowClear:!0,filterOption:s.onSelectSearch,onChange:function(e){null===d||void 0===d||d(e)},disabled:h},options:b,rules:o||[]});return n?Object(v.b)(v.a,{children:Object(v.b)(s.MyForm,{form:n,labelCol:r||{span:8},wrapperCol:c||{span:16},children:f})}):f},j=t(425),w=t(816),y=f.d.nhomKhachHangModal;n.a=function(e){var n,t,a=e.onAfterAddFinish,o=Object(m.a)({Instance:b.a,onPending:g.f,addSelectedId:g.a}),f=Object(u.c)((function(e){return e.diaDiem})).diaDiemId,x=Object(u.b)(),C=Object(u.c)((function(e){return e.form})),D=C.modal,N=C.datas,k=Object(u.c)((function(e){return e.account})).accountData,H=null===k||void 0===k||null===(n=k.paths)||void 0===n||null===(t=n.nhomKhachHang)||void 0===t?void 0:t.edit,I=l.a.useMemo((function(){var e;return!!(null===D||void 0===D||null===(e=D[y])||void 0===e?void 0:e.open)}),[D[y]]);function S(){return(S=Object(c.a)(i.a.mark((function e(n,t){var c,l,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H){e.next=2;break}return e.abrupt("return",Object(p.h)());case 2:return c=!0,e.next=5,x(Object(j.c)(t));case 5:return l=e.sent,e.next=8,x(Object(w.a)(l,"customers"));case 8:if(l=e.sent,console.log(l,"convertedData"),!t){e.next=25;break}if(null===n||void 0===n?void 0:n.id){e.next=20;break}return u=Object(r.a)(Object(r.a)({},l),{},{otherPath:[f]}),e.next=15,x(o.onAddAsync({validatedValues:u}));case 15:c=e.sent,null===a||void 0===a||a(null===(s=c)||void 0===s?void 0:s.id),c=Boolean(c),e.next=25;break;case 20:return e.t0=Boolean,e.next=23,x(o.onUpdateAsync({currentData:n,validatedValues:l}));case 23:e.t1=e.sent,c=(0,e.t0)(e.t1);case 25:c&&x(d.a({modalId:y}));case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(v.b)(s.MyModal,{form:!0,visible:I,onClose:function(){x(d.a({modalId:y}))},onOkModal:function(e,n){return S.apply(this,arguments)},width:700,modalId:y,datas:N,title:Object(v.b)("div",{children:"Nh\xf3m Kh\xe1ch H\xe0ng"}),formOptions:Object(s.getFormItemFields)(h.a.getInputFields()),formProps:{labelCol:{span:8},wrapperCol:{span:16}},children:Object(v.b)(O,{name:"customers",mode:"multiple"})})}}}]);