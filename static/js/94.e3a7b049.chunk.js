(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[94],{1113:function(n,a,e){"use strict";e.r(a);var t=e(3),o=e.n(t),i=e(13),c=e(8),g=e(9),u=e(33),h=e(0),r=e.n(h),d=e(48),l=e(202),b=e(417),s=e(201),T=e(415),m=e(158),j=e(272),O=e(6),C=e(60),N=e(134),v=e(87),f=e(109),p=e(150),L={ghiChuTinhLuongThang:{id:"ghiChuTinhLuongThang",name:"Ghi ch\xfa",width:100,className:"text-small font-weight-bold",align:"center",form:{type:"text-area"}},getTableColumns:function(){return[O.constants.stt,C.b.maNV,C.b.hoTen,Object(c.a)(Object(c.a)({},N.a.tenChucVu),{},{width:85,className:"text-small-8 font-weight-bold"}),Object(c.a)(Object(c.a)({},C.b.ngayVaoLam),{},{name:"Ng\xe0y VL",width:80,className:"text-small-8 font-weight-bold"}),Object(c.a)(Object(c.a)({},C.b.tiengLamViec),{},{width:75,className:"text-small-8 font-weight-bold"}),Object(c.a)(Object(c.a)({},v.a.tenCaLamViec),{},{width:80,className:"text-small-8 font-weight-bold"}),f.a.luongCoBan,f.a.luongTrachNhiem,f.a.luongChuyenCan,f.a.luongPhuCapDienThoaiChucVu,f.a.luongPhuCapDem,f.a.tongLuongThang,f.a.tongLuongNgayCB,p.a.tongCongNgayThuong,p.a.tongNgayHuongLeTet,p.a.tongCongNgayLeTet,p.a.tongCongNgay,p.a.tongGioTangCaThuong,p.a.tongGioTangCaNgayLe,p.a.tongCongTangCaNgay,f.a.tongNhanLuongNgayThuong,f.a.tongNhanNgayNghiLeTet,f.a.tongNhanLuongNgayNghiLeTet,f.a.tongNhanLuongTangCaThuong,f.a.tongNhanLuongTangCaLeTet,f.a.luongNhanChuyenCan,f.a.luongNhanPhuCapDienThoaiChucVu,f.a.luongNhanPhuCapDem,f.a.tongHoTroXang,f.a.phuCapKhac,f.a.tongCongLuong,f.a.truDongPhucTheKhac,f.a.truBaoHiemXaHoi,f.a.tongLuongNhanThang,f.a.truTamUng,f.a.tongLuongThucNhan,this.ghiChuTinhLuongThang]},getInputFields:function(){return[f.a.phuCapKhac,f.a.truDongPhucTheKhac,f.a.truBaoHiemXaHoi,f.a.truTamUng,this.ghiChuTinhLuongThang]},getExcelFields:function(){return this.getTableColumns()}},y=e(416),w=e(402),x=e(271),I=e(472),D=e(66),P=e(572),k=e(75),V=e(567),M=e(428),H=e(17),S=m.b.tinhLuongThang,B=function(n){var a=n.modalId,e=Object(d.b)(),t=Object(d.c)((function(n){return n.form})),o=t.modal,i=t.datas,c=Object(d.c)((function(n){return n.hideColumns})),g=r.a.useMemo((function(){return a||S}),[a]),u=null===c||void 0===c?void 0:c[g],h=r.a.useMemo((function(){var n;return!!(null===o||void 0===o||null===(n=o[S])||void 0===n?void 0:n.open)}),[o[S]]);var l=r.a.useMemo((function(){return L.getTableColumns()}),[]);return Object(H.b)(O.MyModal,{title:"Ch\u1ee9c n\u0103ng kh\xe1c",visible:h,onClose:function(){e(s.a({modalId:S}))},width:600,modalId:g,datas:i,children:Object(H.b)(V.b,{dataSource:l,renderItem:function(n){return Object(H.c)(V.b.Item,{className:(null===u||void 0===u?void 0:u[n.id])?"hoverClass font-weight-bold":"bg-gold hoverClass",onClick:function(){e(Object(M.b)({tableId:g,columnId:n.id}))},children:[Object(H.b)(V.b.Item.Meta,{title:n.name}),Object(H.b)("div",{children:n.fixed?"[\u0110\xe3 c\u1ed1 \u0111\u1ecbnh]":""})]})}})})},F=function(n){var a,e=n.dateTimePicker,t=Object(d.b)(),o=Object(d.c)((function(n){return n.ngayNghiLeTet})).ngayNghiLeTetTrongThang,i=Object(d.c)((function(n){return n.time})).soNgayLamViecTrongThang;return Object(H.c)(H.a,{children:[Object(H.b)(T.a,{header:Object(H.b)("div",{className:"font-weight-bold",children:Object(H.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(H.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(H.b)("div",{children:(null===e||void 0===e||null===(a=e.getMonthRender)||void 0===a?void 0:a.call(e))||null}),Object(H.b)("div",{children:Object(H.b)(D.a,{type:"primary",icon:Object(H.b)(P.a,{}),onClick:function(){return t(Object(s.c)({modalId:m.b.tinhLuongThang}))},children:"\u1ea8n c\u1ed9t c\u1ee7a b\u1ea3ng"})}),Object(H.b)("div",{style:{marginTop:"10px"},children:Object(H.c)("div",{className:"font-weight-bold",children:["S\u1ed1 ng\xe0y l\xe0m vi\u1ec7c trong th\xe1ng: ",i]})}),Object(H.c)("div",{style:{marginTop:"10px"},children:[Object(H.b)("div",{className:"font-weight-bold",children:"Ng\xe0y Ngh\u1ec9 L\u1ec5, T\u1ebft trong th\xe1ng:"}),o&&o.map((function(n){var a=n.id,e=n.ngay,t=n.tenNgay,o=n.mucNhan;return Object(H.c)("div",{children:[e,": ",t," x ",o]},a)}))]})]}),footer:Object(H.b)("div",{children:Object(H.b)(D.a,{icon:Object(H.b)(k.a,{}),onClick:function(){t(Object(b.b)({tagPageId:m.d.tinhLuongThangModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})}),Object(H.b)(B,{modalId:m.d.tinhLuongThangModal})]})},K=e(35),G=e(71),X=e(419),E=e(458),R=e(15),U=e(280),z=e(483),J=e(177);var q=function(n){var a=n.record,e=n.selectedTime,t=Object(d.b)(),i=Object(J.useForm)(),h=Object(u.a)(i,1)[0];function l(){return(l=Object(g.a)(o.a.mark((function n(){var i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.validateFields();case 2:i=n.sent,t(Object(I.e)(e,Object(c.a)(Object(c.a)({},a),i)));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return r.a.useEffect((function(){h.setFieldsValue(a)}),[a]),Object(H.c)("div",{children:[Object(H.b)(O.MyForm,{labelCol:{span:4},wrapperCol:{span:18},options:Object(O.getFormItemFields)(L.getInputFields()),form:h}),Object(H.b)("div",{children:Object(H.b)(D.a,{type:"primary",onClick:function(){return l.apply(this,arguments)},children:"C\u1eadp nh\u1eadt"})})]})},A=e(69),Q=m.d.tinhLuongThangModal;a.default=function(){var n,a,e=Object(d.b)(),t=Object(d.c)((function(n){return n.time})).soNgayLamViecTrongThang,h=Object(d.c)((function(n){return n.ngayNghiLeTet})).soNgayNghiLeTetTrongThang,m=Object(d.c)((function(n){return n.diemDanhThang})).tongHopDiemDanhThangs,O=Object(d.c)((function(n){return n.nhanSu})).nhanSus,C=Object(d.c)((function(n){return n.salary})).salaries,N=Object(d.c)((function(n){return n.tinhLuongThang})),v=N.tabsData,f=N.loading,p=N.pageSize,D=N.tinhLuongThangs,P=Object(d.c)((function(n){var a;return null===(a=n.tagsPage)||void 0===a?void 0:a[Q]})),k=Object(d.c)((function(n){return n.account})).accountData,V=null===k||void 0===k||null===(n=k.paths)||void 0===n||null===(a=n.tinhLuongThang)||void 0===a?void 0:a.edit,M=Object(x.a)({Instance:w.a,onPending:I.d,addSelectedId:I.a,isEdit:V}),S=Object(X.b)({}),B=Object(u.a)(S,2),J=B[0],W=B[1];function Y(){return(Y=Object(g.a)(o.a.mark((function n(a){var t;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("add"!==a||!V){n.next=7;break}if(V){n.next=3;break}return n.abrupt("return",Object(K.h)());case 3:t=new w.a,e(Object(s.c)({modalId:Q,data:t.initData})),n.next=8;break;case 7:"aside"===a?e(Object(b.b)({tagPageId:Q})):"taiExcel"===a&&e(Object(l.b)({tableId:Q,constants:L,fileSheet:"tinhLuongThangSheet",fileName:"tinhLuongThangName"}));case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}r.a.useEffect((function(){return e(Object(E.e)(J)),e(Object(U.d)(J)),e(Object(z.b)(J)),e(Object(I.c)(J)),function(){Object(R.l)("diemDanhThang"),Object(R.l)("tinhLuongThang")}}),[J]);var Z=r.a.useMemo((function(){return Object.values(O).filter((function(n){return n.maNV,"quayCom"===n.boPhanId&&"xuongBinhDuong"===n.diaDiemId&&n.trangThaiNhanSuId===A.c.working.id})).reduce((function(n,a){var e=a.id,o=a.tiengLamViec,g=void 0===o?0:o,u=(null===C||void 0===C?void 0:C[e])||{},r=u.luongChuyenCan,d=u.luongPhuCapDem,l=u.luongPhuCapDienThoaiChucVu,b=u.tongLuongNgayCB,s=void 0===b?0:b,T=g?s/g:0,j=(null===D||void 0===D?void 0:D[e])||{},O=j.phuCapKhac,N=void 0===O?0:O,v=j.truDongPhucTheKhac,f=void 0===v?0:v,p=j.truBaoHiemXaHoi,L=void 0===p?0:p,y=j.truTamUng,w=void 0===y?0:y,x=j.ghiChuTinhLuongThang,I=void 0===x?"":x,P=(null===m||void 0===m?void 0:m[e])||{},k=P.tongCongNgayThuong,V=void 0===k?0:k,M=P.tongGioTangCaThuong,H=void 0===M?0:M,S=P.tongCongNgayLeTet,B=void 0===S?0:S,F=P.tongGioTangCaNgayLe,K=void 0===F?0:F,G=P.tongCongNgay,X=void 0===G?0:G,E=P.tongHoTroXang,R=void 0===E?0:E,U=P.tongCongTangCaNgay,z=void 0===U?0:U,J=Math.round(V*s),q=Math.round((h||0)*s),A=Math.round(B*s),Q=Math.round(T*H),W=Math.round(T*K),Y=X>0?t/X:0,Z=X>=t?r:0,$=X>=20?l:0,_=t>=X?d:Math.round((d||0)*Y),nn=J+q+A+Z+$+_+Q+W+N,an=nn-f-L,en=an-w,tn=Object(c.a)(Object(c.a)(Object(c.a)({},a),u),{},{luongTiengLamViec:T,tongCongNgayThuong:V,tongCongNgayLeTet:B,tongCongNgay:X,tongGioTangCaThuong:H,tongGioTangCaNgayLe:K,tongCongTangCaNgay:z,tongHoTroXang:R,tongNhanLuongNgayThuong:J,tongNhanNgayNghiLeTet:q,tongNhanLuongNgayNghiLeTet:A,tongNhanLuongTangCaThuong:Q,tongNhanLuongTangCaLeTet:W,luongNhanChuyenCan:Z,luongNhanPhuCapDienThoaiChucVu:$,luongNhanPhuCapDem:_,phuCapKhac:N,tongCongLuong:nn,tongNgayHuongLeTet:h,truDongPhucTheKhac:f,truBaoHiemXaHoi:L,truTamUng:w,ghiChuTinhLuongThang:I,tongLuongNhanThang:an,tongLuongThucNhan:en});return Object(c.a)(Object(c.a)({},n),{},Object(i.a)({},e,tn))}),{})}),[O,C,m,h,t,D]);return Object(H.c)("div",{className:"tinhLuongThang-page",css:j.a,children:[Object(H.b)(T.b,{className:"tabs",options:v,activeKey:P?"aside":"",onTabClick:function(n){return Y.apply(this,arguments)}}),Object(H.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[P&&Object(H.b)(F,{dateTimePicker:W}),Object(H.b)("div",{className:"aside-main",children:Object(H.b)(y.a,{isEdit:V,constants:L,actions:M,datas:Z,loading:f,modalId:Q,expandable:{expandedRowRender:function(n){return Object(H.c)("div",{children:[Object(H.c)("div",{children:["Nh\xe2n vi\xean Id: ",n.id]}),Object(H.b)(q,{selectedTime:J,record:n})]})},expandRowByClick:!1},isSelection:!0,pagination:!0,pageSize:p,onChange:function(n){e(Object(I.f)(n.pageSize))},onRow:function(n){return{onClick:function(){}}},onCallbackDataSource:function(n){return Object(G.orderBy)(n,["tenCaLamViec","tenBoPhan","tenChucVu","maNV"])}})})]})]})}}}]);