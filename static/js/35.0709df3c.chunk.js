(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[35],{1102:function(e,n,a){"use strict";a.r(n);var t=a(3),c=a.n(t),i=a(13),o=a(7),d=a(9),l=a(33),r=a(0),u=a.n(r),b=a(48),s=a(417),m=a(127),O=a(520),j=a(518),h=a(556),v=a(558),f=a(110),g=a(179),p=a(413),y=a(158),D=a(271),C=a(414),I=a(270),M=a(202),V=a(201),T=a(128),w=a(6),N=a(87),F=a(60),G=a(134),L=a(133),S=a(113),k={getTableColumns:function(){return[w.constants.stt,F.b.maNV,F.b.hoTen,L.a.tenBoPhan,G.a.tenChucVu,N.a.tenCaLamViec,S.a.gioVao,S.a.gioRa,S.a.tongGio,S.a.congNgay,S.a.congTangCaNgay,S.a.lyDoVang,w.constants.capNhatRow]},getInputFields:function(){return[S.a.congNgay,S.a.congTangCaNgay,S.a.lyDoVang]},getExcelFields:function(){return[F.b.maNV,F.b.hoTen,F.b.boPhanId,G.a.tenChucVu,N.a.tenCaLamViec,S.a.congNgay,S.a.congTangCaNgay,S.a.lyDoVang]}},x=a(277),R=a(797),P=a(35),E=a(17),B=y.d.diemDanhDauGiayModal;var K=function(e){var n,a,t,i=e.selectedTime,r=Object(g.useForm)(),s=Object(l.a)(r,1)[0],m=Object(g.useForm)(),O=Object(l.a)(m,1)[0],j=Object(b.b)(),h=Object(b.c)((function(e){return e.form})),v=h.modal,f=h.datas,p=Object(b.c)((function(e){return e.caLamViec})).caLamViecs,y=Object(b.c)((function(e){return e.account})).accountData,D=null===y||void 0===y||null===(n=y.paths)||void 0===n||null===(a=n.diemDanhDauGiay)||void 0===a?void 0:a.edit,C=u.a.useMemo((function(){var e;return!!(null===v||void 0===v||null===(e=v[B])||void 0===e?void 0:e.open)}),[null===(t=v[B])||void 0===t?void 0:t.open]),I=null===f||void 0===f?void 0:f[B];function M(){return(M=Object(d.a)(c.a.mark((function e(){var n,a,t,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D){e.next=2;break}return e.abrupt("return",Object(P.h)());case 2:return!0,e.next=5,O.validateFields();case 5:return a=e.sent,t=null===a||void 0===a?void 0:a.caLamViecId,d=null===p||void 0===p||null===(n=p[t])||void 0===n?void 0:n.tenCaLamViec,e.next=10,j(Object(x.f)({selectedTime:i,nhanSuArray:[Object(o.a)(Object(o.a)({},I),{},{caLamViecId:t,tenCaLamViec:d})],noiDungDiemDanhs:a}));case 10:e.sent&&j(V.a({modalId:B}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.a.useEffect((function(){var e=null===f||void 0===f?void 0:f[B];e?(s.setFieldsValue(e),O.setFieldsValue(e)):(s.resetFields(),O.resetFields())}),[I]);var T=[F.b.maNV,F.b.hoTen],N=k.getInputFields();return Object(E.c)(w.MyModal,{title:"\u0110i\u1ec3m Danh",visible:C,onClose:function(){j(V.a({modalId:B}))},onOkModal:function(){return M.apply(this,arguments)},width:700,modalId:B,datas:f,children:[Object(E.b)(w.MyForm,{form:s,options:Object(w.getFormItemFields)(T),labelCol:{span:8},wrapperCol:{span:16}}),Object(E.b)(w.MyForm,{form:O,options:Object(w.getFormItemFields)(N),labelCol:{span:8},wrapperCol:{span:16}}),Object(E.b)(R.a,{form:O})]})},Y=a(491),z=a(810),A=a(10),J=a(19),Q=a(20),q=function(e){Object(J.a)(a,e);var n=Object(Q.a)(a);function a(){var e;Object(A.a)(this,a);for(var t=arguments.length,c=new Array(t),i=0;i<t;i++)c[i]=arguments[i];return(e=n.call.apply(n,[this].concat(c))).initData={},e}return a}(a(247).a),H=a(15),U=a(66),W=a(570),X=a(598),Z=a.n(X),$=a(565),_=a(424),ee=y.b.diemDanhDauGiay,ne=function(e){var n=e.modalId,a=Object(b.b)(),t=Object(b.c)((function(e){return e.form})),c=t.modal,i=t.datas,o=Object(b.c)((function(e){return e.hideColumns})),d=null===o||void 0===o?void 0:o[y.d.diemDanhDauGiayModal],l=u.a.useMemo((function(){return n||ee}),[n]),r=u.a.useMemo((function(){var e;return!!(null===c||void 0===c||null===(e=c[ee])||void 0===e?void 0:e.open)}),[c[ee]]);var s=u.a.useMemo((function(){return k.getTableColumns()}),[]);return Object(E.b)(w.MyModal,{title:"Ch\u1ee9c n\u0103ng kh\xe1c",visible:r,onClose:function(){a(V.a({modalId:ee}))},width:600,modalId:l,datas:i,children:Object(E.b)($.b,{dataSource:s,renderItem:function(e){return Object(E.c)($.b.Item,{className:(null===d||void 0===d?void 0:d[e.id])?"hoverClass font-weight-bold":"bg-gold hoverClass",onClick:function(){a(Object(_.b)({tableId:y.d.diemDanhDauGiayModal,columnId:e.id}))},children:[Object(E.b)($.b.Item.Meta,{title:e.name}),Object(E.b)("div",{children:e.fixed?"[\u0110\xe3 c\u1ed1 \u0111\u1ecbnh]":""})]})}})})},ae=a(415),te=function(e){var n,a=e.dateTimePicker,t=Object(b.b)();return Object(E.c)(E.a,{children:[Object(E.b)(p.a,{header:Object(E.b)("div",{className:"font-weight-bold",children:Object(E.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(E.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(E.b)("div",{children:null===a||void 0===a||null===(n=a.getDayRender)||void 0===n?void 0:n.call(a)}),Object(E.b)("div",{children:Object(E.b)(U.a,{type:"primary",icon:Object(E.b)(W.a,{}),onClick:function(){return t(Object(V.c)({modalId:y.b.diemDanhDauGiay}))},children:"\u1ea8n c\u1ed9t c\u1ee7a b\u1ea3ng"})})]}),footer:Object(E.b)("div",{children:Object(E.b)(U.a,{icon:Object(E.b)(Z.a,{}),onClick:function(){t(Object(ae.b)({tagPageId:y.d.diemDanhDauGiayModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})}),Object(E.b)(ne,{modalId:y.d.diemDanhDauGiayModal})]})},ce=a(69),ie=a(32),oe=a.n(ie),de=y.d.diemDanhDauGiayModal;n.default=function(){var e,n,a,t,r=Object(b.b)(),N=Object(b.c)((function(e){return e.account})).isDev,F=Object(g.useForm)(),G=Object(l.a)(F,1)[0],L=Object(s.b)({defaultTime:N?oe()("31/03/2022","DD/MM/YYYY"):oe()()}),R=Object(l.a)(L,2),B=R[0],A=R[1],J=Object(b.c)((function(e){var n;return null===(n=e.tagsPage)||void 0===n?void 0:n[de]})),Q=Object(b.c)((function(e){return{nhanSusDauGiay:e.nhanSu.nhanSusDauGiay,selectedRows:e.table.selectedRows}})),U=Q.nhanSusDauGiay,W=Q.selectedRows,X=Object(b.c)((function(e){return e.nhanSu})).nhanSus,Z=Object(b.c)((function(e){return e.diemDanh})),$=Z.loading,_=Z.diemDanhsDay,ee=Z.fingerprintByMonth,ne=Object(b.c)((function(e){return e.diemDanhDauGiay})),ie=ne.tabsData,le=ne.pageSize,re=Object(b.c)((function(e){return e.account})).accountData,ue=null===re||void 0===re||null===(e=re.paths)||void 0===e||null===(n=e.diemDanhDauGiay)||void 0===n?void 0:n.edit,be=Object(I.a)({Instance:q,onPending:x.e,addSelectedId:Y.a,isEdit:ue});function se(){return(se=Object(d.a)(c.a.mark((function e(){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ue){e.next=2;break}return e.abrupt("return",Object(P.h)());case 2:if(n=G.getFieldsValue(),0!==(a=W[de]||[]).length){e.next=6;break}return e.abrupt("return",m.b.info("Ch\u01b0a ch\u1ecdn d\u1eef li\u1ec7u!"));case 6:return e.next=8,r(Object(x.f)({selectedTime:B,nhanSuArray:a,noiDungDiemDanhs:n}));case 8:r(Object(M.c)());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.a.useEffect((function(){return r(Object(x.d)(B)),r(Object(x.b)(B)),function(){Object(H.l)("diemDanhDauGiayNgay")}}),[B]),u.a.useEffect((function(){G.setFieldsValue({congNgay:1}),r(Object(T.j)())}),[]);var me=u.a.useMemo((function(){var e={trangThaiNhanSuId:ce.c.working.id,diaDiemId:"xuongDauGiay"},n=r(Object(T.c)(U,e)),a="ngayQuet"+(null===B||void 0===B?void 0:B.format("DD"));return Object.entries(n).reduce((function(e,n){var t,c=Object(l.a)(n,2),d=c[0],r=c[1],u=(null===ee||void 0===ee||null===(t=ee[d])||void 0===t?void 0:t[a])||{},b=(null===_||void 0===_?void 0:_[d])||{},s=Object(o.a)(Object(o.a)(Object(o.a)({},r),b),u);return Object(o.a)(Object(o.a)({},e),{},Object(i.a)({},d,s))}),{})}),[U,_,ee,B]);return Object(E.c)("div",{className:"diemDanhDauGiay-page",css:D.a,children:[Object(E.b)(p.b,{className:"tabs",options:ie,activeKey:"all",onTabClick:function(e){"taiExcel"===e?r(Object(M.b)({tableId:de,constants:k,fileSheet:"diemDanhDauGiayCom",fileName:"diemDanhDauGiayCom"})):"aside"===e?r(Object(ae.b)({tagPageId:de})):"xemThongKe"===e&&r(Object(V.c)({modalId:y.d.thongKeDiemDanhModal}))}}),Object(E.c)("div",{className:"tabs-main",children:[J&&Object(E.b)(te,{dateTimePicker:A,selectedTime:B}),Object(E.c)("div",{className:"aside-main",children:[Object(E.c)(O.a,{className:"form-selects",gutter:10,style:{marginTop:"7px"},children:[Object(E.b)(j.a,{sm:7,md:6,lg:5,children:A.getDayRender()}),Object(E.b)(j.a,{sm:17,md:18,lg:19,children:Object(E.c)(h.a,{layout:"inline",form:G,children:[Object(E.b)(h.a.Item,{name:S.a.congNgay.id,children:Object(E.b)(v.a,{placeholder:"C\xf4ng ng\xe0y",min:0})}),Object(E.b)(h.a.Item,{name:S.a.congTangCaNgay.id,children:Object(E.b)(v.a,{placeholder:"T\u0103ng ca",min:0})}),Object(E.b)(h.a.Item,{name:S.a.lyDoVang.id,children:Object(E.b)(f.a,{placeholder:"L\xfd do v\u1eafng",options:(null===(a=S.a.lyDoVang)||void 0===a||null===(t=a.form)||void 0===t?void 0:t.options)||[],allowClear:!0})}),Object(E.b)(w.MyButton,{onClick:function(){return se.apply(this,arguments)},children:"\u0110i\u1ec3m danh"})]})})]}),Object(E.b)(C.a,{isEdit:ue,constants:k,actions:be,datas:me,loading:$,modalId:de,pageSize:le,isSelection:!0,onChange:function(e){r(Object(Y.c)(e.pageSize))},pagination:!0,onRow:function(e){return{onClick:function(){console.log(e)}}},expandable:{expandedRowRender:function(e){var n=(null===X||void 0===X?void 0:X[e.id||""])||{};return Object(E.c)("div",{children:[e.id," - ",n.tenDiaDiem," - ",n.tenBoPhan," - ",n.tiengLamViec]})},expandRowByClick:!1}})]})]}),Object(E.b)(K,{selectedTime:B}),Object(E.b)(z.a,{datas:me})]})}},797:function(e,n,a){"use strict";var t=a(0),c=a.n(t),i=a(6),o=a(48),d=a(420),l=a(17);n.a=function(e){var n=e.form,a=e.style,t=Object(o.b)(),r=Object(o.c)((function(e){return e.caLamViec})).caLamViecs,u=c.a.useMemo((function(){return Object.values(r||{}).map((function(e){var n=e.tenCaLamViec;return{value:e.id,label:n}}))}),[r]);var b=Object(l.b)(i.MyFormItem,{label:"Ca L\xe0m Vi\u1ec7c",type:"select",name:"caLamViecId",innerProps:{style:a,showSearch:!0,allowClear:!0,filterOption:i.onSelectSearch,onChange:function(e){t(Object(d.addSelectedId)(e))}},options:u});return n?Object(l.b)(i.MyForm,{form:n,labelCol:{span:8},wrapperCol:{span:16},children:b}):b}},810:function(e,n,a){"use strict";var t=a(13),c=a(7),i=a(0),o=a.n(i),d=a(6),l=a(48),r=a(201),u=a(158),b=a(113),s=a(414),m=a(17),O=u.d.thongKeDiemDanhModal;n.a=function(e){var n,a=e.datas,i=Object(l.b)(),u=Object(l.c)((function(e){return e.form})).modal,j=Object(l.c)((function(e){return e.caLamViec})).caLamViecs,h=o.a.useMemo((function(){var e;return!!(null===u||void 0===u||null===(e=u[O])||void 0===e?void 0:e.open)}),[null===(n=u[O])||void 0===n?void 0:n.open]),v=o.a.useMemo((function(){return h?Object.values(a).reduce((function(e,n){var a=n.caLamViecId,i=n.congNgay,o=n.congTangCaNgay,d=null===j||void 0===j?void 0:j[a||""],l=(null===e||void 0===e?void 0:e[a||""])||{},r=(null===l||void 0===l?void 0:l.tong)||0,u=(null===l||void 0===l?void 0:l.diLam)||0,b=i||o?1:0,s=(null===l||void 0===l?void 0:l.vang)||0,m=i||o?0:1;return a?Object(c.a)(Object(c.a)({},e),{},Object(t.a)({},a,Object(c.a)(Object(c.a)({},d),{},{tong:r+1,diLam:u+b,vang:s+m}))):e}),{}):{}}),[h,a,j]);return Object(m.b)(d.MyModal,{title:"Th\u1ed1ng K\xea \u0110i\u1ec3m Danh",visible:h,onClose:function(){return i(r.a({modalId:O}))},width:700,modalId:O,datas:a,children:Object(m.b)(s.a,{scroll:{x:500},constants:b.b,datas:v,pagination:!1})})}}}]);