(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[26],{1112:function(e,n,t){"use strict";t.r(n);var a=t(33),c=t(0),i=t.n(c),o=t(32),r=t.n(o),d=t(559),u=t(48),l=t(415),b=t(201),s=t(158),h=t(272),f=t(145),g=t(416),v=t(3),O=t.n(v),j=t(8),m=t(9),p=t(6),k=t(35),M=t(477),x=t(17),y=s.d.bcqnTienMatModal,C=function(){var e,n,t=Object(u.b)(),a=Object(u.c)((function(e){return e.form})),c=a.modal,o=a.datas,r=Object(u.c)((function(e){return e.account})).accountData,d=null===r||void 0===r||null===(e=r.paths)||void 0===e||null===(n=e.bcqnTienMat)||void 0===n?void 0:n.edit,l=i.a.useMemo((function(){var e;return!!(null===c||void 0===c||null===(e=c[y])||void 0===e?void 0:e.open)}),[c[y]]);function s(){return(s=Object(m.a)(O.a.mark((function e(n,a){var c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return",Object(k.h)());case 2:if(c=Object(p.convertMomentToString)(f.a.getInputFields(),a),!a){e.next=7;break}return i=Object(j.a)(Object(j.a)({},c),{},{id:n.id}),e.next=7,t(Object(M.g)(i));case 7:t(b.a({modalId:y}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(x.b)(p.MyModal,{form:!0,title:Object(x.b)("div",{children:"B\xe1o C\xe1o Ti\u1ec1n M\u1eb7t Qu\u1ea7y N\u01b0\u1edbc"}),visible:l,onClose:function(){t(b.a({modalId:y}))},onOkModal:function(e,n){return s.apply(this,arguments)},formOptions:Object(p.getFormItemFields)(f.a.getInputFields()),formProps:{labelCol:{span:8},wrapperCol:{span:16}},width:700,modalId:y,datas:o})},N=t(240),S=t(271),T=t(202),I=t(417),w=t(66),H=t(75),D=t(885),P=t(21),V=t(15),F=t(71);var q=function(e){var n,t=e.selectedTime,a=e.dateTimePicker,c=e.form,i=Object(u.b)();function o(){return(o=Object(m.a)(O.a.mark((function e(){var n,a,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===c||void 0===c||null===(n=c.validateFields)||void 0===n?void 0:n.call(c);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return a=e.t0,o=a.khachHangId,e.next=9,i(Object(M.e)(t,o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(x.b)(x.a,{children:Object(x.b)(l.a,{header:Object(x.b)("div",{className:"font-weight-bold",children:Object(x.b)("span",{children:"Th\xf4ng Tin Trang "})}),body:Object(x.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(x.b)("div",{children:Object(x.b)(D.a,{form:c,rules:[{required:!0,message:"Ch\u01b0a ch\u1ecdn kh\xe1ch h\xe0ng"}],onAfterSelect:function(e){localStorage.setItem("khachHangId",e)}})}),Object(x.b)("div",{children:(null===a||void 0===a||null===(n=a.getDayRender)||void 0===n?void 0:n.call(a))||null}),Object(x.b)("div",{children:Object(x.b)(w.a,{block:!0,onClick:function(){return o.apply(this,arguments)},type:"primary",children:"Hi\u1ec3n th\u1ecb d\u1eef li\u1ec7u m\u1ed9t th\xe1ng"})}),Object(x.b)("div",{className:"mt-1",children:Object(x.b)(w.a,{block:!0,onClick:function(){var e=window.prompt("Nh\u1eadp th\xe1ng n\u0103m theo m\u1eabu sau: MM-YYYY")+"";i(function(e){return Object(m.a)(O.a.mark((function n(){var t,a,c,i,o,r,d,u;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",{});case 2:return n.next=4,Object(V.d)(["dieuHanh","khoNuoc","thietLap","loaiSanPham","datas"]);case 4:return t=n.sent,n.next=7,Object(V.d)(["dieuHanh","thietLap","donViTinh","datas"]);case 7:return a=n.sent,n.next=10,Object(V.d)(["dieuHanh","khoNuoc","thietLap","sanPham","datas"]);case 10:return c=n.sent,n.next=13,Object(V.d)(["dieuHanh","khoNuoc","thietLap","sanPham","deleted"]);case 13:return i=n.sent,n.next=16,Object(V.d)(["dieuHanh","khoNuoc","phieuDatHang","finished",e]);case 16:o=n.sent,r=Object.values(o||{}).reduce((function(e,n){return Object.values(n||{}).reduce((function(e,n){var t=n.prices;return Object(j.a)(Object(j.a)({},e),t)}),e)}),{}),d=Object.values(c).map((function(e){var n,a,c=e,o=c.id,d=c.loaiSanPham,u=null===r||void 0===r?void 0:r[o],l=(null===t||void 0===t||null===(n=t[d])||void 0===n?void 0:n.order)||0;e=e||(null===i||void 0===i?void 0:i[o])||{};var b=Object(p.xoaDauVietNam)((null===(a=e)||void 0===a?void 0:a.tenSanPham)||"");return Object(j.a)(Object(j.a)({},e),{},{search:b,order:l,giaMatHang:u})})),d=Object(F.orderBy)(d,["order","sort"]),u=d.reduce((function(e,n,c){var i,o,r,d=n.tenSanPham,u=n.donViTinh,l=n.loaiSanPham,b=n.giaMatHang,s=n.soLuongQuyDoi,h=n.donViQuyDoi;h=h||u;var f=(null===t||void 0===t||null===(i=t[l])||void 0===i?void 0:i.tenLoaiSanPham)||l,g=(null===a||void 0===a||null===(o=a[h||u])||void 0===o?void 0:o.tenDVT)||h,v=(null===a||void 0===a||null===(r=a[u])||void 0===r?void 0:r.tenDVT)||u;return[].concat(Object(P.a)(e),[[c+1,d,f,b,g,s,v]])}),[["stt","T\xean s\u1ea3n ph\u1ea9m","Lo\u1ea1i","Gi\xe1 nh\u1eadp ".concat(e),"\u0110VT nh\u1eadp","SL quy \u0111\u1ed5i","\u0110VT"]]),Object(p.exportDataArraysToExcel)([["datas",u]],"Gia Mat Hang Nuoc ".concat(e)),Object(k.g)("\u0110\xe3 t\u1ea3i file excel!");case 23:case"end":return n.stop()}}),n)})))}(e))},children:"Download gi\xe1 m\u1eb7t theo th\xe1ng"})})]}),footer:Object(x.b)("div",{children:Object(x.b)(w.a,{icon:Object(x.b)(H.a,{}),onClick:function(){i(Object(I.b)({tagPageId:s.d.bcqnTienMatModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})})})},L=t(419),A=t(13),B=t(433),E=t(87),Y=s.d.bcqnTienMatModal,Q=Object(c.memo)((function(e){var n=e.pageData,t=Object(u.c)((function(e){return e.bcqnTienMat})).noiPhucVuFields,a=Object(u.c)((function(e){return e.hideColumns})),c=null===a||void 0===a?void 0:a[Y||""],o=i.a.useMemo((function(){var e=[f.a.ngay,E.a.tenCaLamViec],n=[f.a.ghiChu],a=e.reduce((function(e,n){var t=n.id;return e+((null===c||void 0===c?void 0:c[t])?0:1)}),0),i=n.reduce((function(e,n){var t=n.id;return e+((null===c||void 0===c?void 0:c[t])?0:1)}),0);return[{id:0,colSpan:1+a,cellClassName:"text-center font-weight-bold text-danger"}].concat(Object(P.a)(t.map((function(e,n){return{id:n+1,colSpan:1,cellClassName:"text-right font-weight-bold text-small text-danger",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,t=n.tongNgay||1,a=Math.round(e/t*1e3)/10;return Object(x.c)("div",{children:[Object(p.formatNumber)(e)," ",Object(x.c)("span",{className:"text-dark",children:[a,"%"]})]})}}}))),[{id:t.length+1,colSpan:1,cellClassName:"text-right font-weight-bold text-small text-danger",render:function(e){return Object(p.formatNumber)(e)}},{id:t.length+2,colSpan:1,cellClassName:"text-right font-weight-bold text-small text-danger",render:function(e){return Object(p.formatNumber)(Math.round(e))}},{id:t.length+3,colSpan:1,cellClassName:"text-right font-weight-bold text-small text-danger",render:function(e){return Object(p.formatNumber)(e)}},{id:t.length+4,colSpan:i}])}),[c,t]),r=i.a.useMemo((function(){return n.reduce((function(e,n){var a=e.tongCa+(n.tongCa||0),c=e.tongNgay+("caSang"===n.caLamViecId&&n.tongNgay||0),i=e.thuBoSung+(n.thuBoSung||0),o=t.reduce((function(e,t){var a=t.id,c=((null===e||void 0===e?void 0:e[a])||0)+((null===n||void 0===n?void 0:n[a])||0);return Object(j.a)(Object(j.a)({},e),{},Object(A.a)({},a,c))}),e);return Object(j.a)(Object(j.a)(Object(j.a)({},e),o),{},{tongCa:a,tongNgay:c,thuBoSung:i})}),{tong:"T\u1ed5ng ti\u1ec1n",tongCa:0,tongNgay:0,thuBoSung:0})}),[n,t]),d=i.a.useMemo((function(){return["tong"].concat(Object(P.a)(t.map((function(e){return e.id}))),["tongCa","tongNgay","thuBoSung"]).map((function(e,n){var t,a=null===r||void 0===r?void 0:r.tongNgay;return t={},Object(A.a)(t,n,r[e]),Object(A.a)(t,"tongNgay",a),t}))}),[r,t]);return Object(x.b)(B.a,{columns:o,dataSource:d})})),K=Q,z=t(427),G=s.d.bcqnTienMatModal;n.default=function(){var e,n,t=Object(u.b)(),c=d.a.useForm(),o=Object(a.a)(c,1)[0],s=Object(L.b)(),v=Object(a.a)(s,2),O=v[0],j=v[1],m=Object(u.c)((function(e){return e.bcqnTienMat})),y=m.tabsData,w=m.loading,H=m.pageSize,D=m.bcqnTienMats,P=m.tableConstants,V=Object(u.c)((function(e){var n;return null===(n=e.tagsPage)||void 0===n?void 0:n[G]})),F=Object(u.c)((function(e){return e.account})).accountData,A=null===F||void 0===F||null===(e=F.paths)||void 0===e||null===(n=e.bcqnTienMat)||void 0===n?void 0:n.edit,B=Object(u.c)((function(e){return e.khachHang})).khachHangId,E=Object(u.c)((function(e){return e.noiPhucVu})).noiPhucVus,Y=Object(S.a)({Instance:N.a,onPending:M.f,addSelectedId:M.a,isEdit:A});return i.a.useEffect((function(){t(Object(M.c)())}),[B,E]),i.a.useEffect((function(){var e=localStorage.getItem("khachHangId");o.setFieldsValue({khachHangId:e}),t(Object(z.a)(e)),t(Object(M.e)(O,e))}),[]),Object(x.c)("div",{className:"bcqnTienMat-page",css:h.a,children:[Object(x.b)(l.b,{className:"tabs",options:y,activeKey:V?"aside":"",onTabClick:function(e){if("add"===e&&A){if(!A)return Object(k.h)();var n=new N.a;t(b.c({modalId:G,data:n.initData}))}else if("aside"===e)t(Object(I.b)({tagPageId:G}));else if("taiExcel"===e)t(Object(T.b)({tableId:G,constants:f.a,fileSheet:"bcqnTienMatSheet",fileName:"bcqnTienMatName"}));else if("capNhatDuLieu"===e){if(!A)return Object(k.h)();if(!window.confirm("X\xe1c nh\u1eadn c\u1eadp nh\u1eadt?"))return;t(Object(M.d)(O,j))}}}),Object(x.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[V&&Object(x.b)(q,{form:o,selectedTime:O,dateTimePicker:j}),Object(x.b)("div",{className:"aside-main",children:Object(x.b)(g.a,{constants:P,actions:Y,datas:D,loading:w,modalId:G,isEdit:A,isSelection:!0,pagination:!0,pageSize:H,rowClassName:function(e){return"CN"===r()(e.dayId,"YYMMDD").format("dd")?"bg-gold-less":""},onRow:function(e){return{onClick:function(){var n=Object(p.convertToMoment)([f.a.ngay],e);"caSang"===n.caLamViecId&&t(Object(b.c)({modalId:G,data:n}))}}},onChange:function(e){t(Object(M.h)(e.pageSize))},summary:function(e){return Object(x.b)(K,{pageData:e})}})})]}),Object(x.b)(C,{})]})}},794:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var a={appSettings:"/app-settings",diaDiem:"/app-settings/dia-diem",khachHang:"/app-settings/khach-hang",noiPhucVu:"/app-settings/noi-phuc-vu",donViTinh:"/app-settings/don-vi-tinh",nhaCungCap:"/app-settings/nha-cung-cap"}},838:function(e,n,t){"use strict";var a=t(3),c=t.n(a),i=t(9),o=t(0),r=t.n(o),d=t(6),u=t(66),l=t(50),b=t(332),s=t(48),h=t(201),f=t(242),g=t(271),v=t(451),O=t(158),j=t(427),m=t(35),p=t(794),k=t(17),M=O.d.khachHangModal;n.a=function(e){var n,t,a=e.onAfterAddFinish,o=Object(g.a)({Instance:v.a,onPending:j.e,addSelectedId:j.a}),O=Object(s.b)(),x=Object(l.u)(),y=Object(s.c)((function(e){return e.form})),C=y.modal,N=y.datas,S=Object(s.c)((function(e){return e.account})).accountData,T=null===S||void 0===S||null===(n=S.paths)||void 0===n||null===(t=n.khachHang)||void 0===t?void 0:t.edit,I=r.a.useMemo((function(){var e;return!!(null===C||void 0===C||null===(e=C[M])||void 0===e?void 0:e.open)}),[C[M]]);function w(){return(w=Object(i.a)(c.a.mark((function e(n,t){var i,r,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=2;break}return e.abrupt("return",Object(m.h)());case 2:if(i=!0,r=Object(d.convertMomentToString)(f.a.getInputFields(),t),!t){e.next=18;break}if(null===n||void 0===n?void 0:n.id){e.next=13;break}return e.next=8,O(o.onAddAsync({validatedValues:r}));case 8:i=e.sent,null===a||void 0===a||a(null===(u=i)||void 0===u?void 0:u.id),i=Boolean(i),e.next=18;break;case 13:return e.t0=Boolean,e.next=16,O(o.onUpdateAsync({currentData:n,validatedValues:r}));case 16:e.t1=e.sent,i=(0,e.t0)(e.t1);case 18:i&&O(h.a({modalId:M}));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(k.b)(d.MyModal,{form:!0,title:Object(k.c)("div",{children:["Kh\xe1ch H\xe0ng ",Object(k.b)(u.a,{icon:Object(k.b)(b.a,{}),onClick:function(){x(p.a.khachHang)},children:"Trang qu\u1ea3n l\xfd"})]}),visible:I,onClose:function(){O(h.a({modalId:M}))},onOkModal:function(e,n){return w.apply(this,arguments)},formOptions:Object(d.getFormItemFields)(f.a.getInputFields()),formProps:{labelCol:{span:8},wrapperCol:{span:16}},width:700,modalId:M,datas:N})}},885:function(e,n,t){"use strict";var a=t(0),c=t.n(a),i=t(66),o=t(132),r=t(50),d=t(6),u=t(48),l=t(427),b=t(838),s=t(59),h=t(332),f=t(201),g=t(158),v=t(794),O=t(17);n.a=function(e){var n,t,a=e.form,j=e.name,m=e.mode,p=e.label,k=e.labelCol,M=e.wrapperCol,x=e.rules,y=e.isAddNew,C=e.isTrangQuanLy,N=e.onAfterSelect,S=e.disabled,T=Object(u.b)(),I=Object(r.u)(),w=Object(u.c)((function(e){return e.khachHang})).khachHangs,H=Object(u.c)((function(e){return e.account})).accountData,D=c.a.useMemo((function(){return Object.values(w).filter((function(e){return e.active})).map((function(e){var n="".concat(e.tenKhachHang);return{value:e.id,label:n}}))}),[w]),P=null===H||void 0===H||null===(n=H.paths)||void 0===n||null===(t=n.khachHang)||void 0===t?void 0:t.edit;var V=Object(O.b)(d.MyFormItem,{label:null!==p&&void 0!==p?p:"Kh\xe1ch h\xe0ng",type:"select",name:null!==j&&void 0!==j?j:"khachHangId",innerProps:{mode:m,showSearch:!0,allowClear:!0,filterOption:d.onSelectSearch,onChange:function(e){T(Object(l.a)(e)),null===N||void 0===N||N(e)},disabled:S,notFoundContent:P?Object(O.c)("div",{children:[y?Object(O.b)(i.a,{icon:Object(O.b)(s.a,{}),type:"primary",onClick:function(){return T(Object(f.c)({modalId:g.d.khachHangModal}))},children:"Th\xeam"}):null,C?Object(O.b)(i.a,{icon:Object(O.b)(h.a,{}),type:"dashed",onClick:function(){I(v.a.khachHang)},children:"Q. l\xfd"}):null]}):Object(O.b)(o.a,{})},options:D,rules:x||[]});return a?Object(O.c)(O.a,{children:[Object(O.b)(d.MyForm,{form:a,labelCol:k||{span:8},wrapperCol:M||{span:16},children:V}),P&&Object(O.b)(b.a,{onAfterAddFinish:function(e){a.setFieldsValue({khachHangId:e})}})]}):Object(O.c)(O.a,{children:[V,P&&Object(O.b)(b.a,{})]})}}}]);